{"version":3,"file":"index.min.js","sources":["../node_modules/svelte/shared.js","../src/helpers/EditorModal.html","../src/helpers/EditorColorPicker.html","../src/Editor.html","../src/helpers/util.ts","../src/helpers/actions.ts"],"sourcesContent":["function noop() {}\n\nfunction assign(target) {\n\tvar k,\n\t\tsource,\n\t\ti = 1,\n\t\tlen = arguments.length;\n\tfor (; i < len; i++) {\n\t\tsource = arguments[i];\n\t\tfor (k in source) target[k] = source[k];\n\t}\n\n\treturn target;\n}\n\nfunction appendNode(node, target) {\n\ttarget.appendChild(node);\n}\n\nfunction insertNode(node, target, anchor) {\n\ttarget.insertBefore(node, anchor);\n}\n\nfunction detachNode(node) {\n\tnode.parentNode.removeChild(node);\n}\n\nfunction detachBetween(before, after) {\n\twhile (before.nextSibling && before.nextSibling !== after) {\n\t\tbefore.parentNode.removeChild(before.nextSibling);\n\t}\n}\n\nfunction detachBefore(after) {\n\twhile (after.previousSibling) {\n\t\tafter.parentNode.removeChild(after.previousSibling);\n\t}\n}\n\nfunction detachAfter(before) {\n\twhile (before.nextSibling) {\n\t\tbefore.parentNode.removeChild(before.nextSibling);\n\t}\n}\n\nfunction reinsertBetween(before, after, target) {\n\twhile (before.nextSibling && before.nextSibling !== after) {\n\t\ttarget.appendChild(before.parentNode.removeChild(before.nextSibling));\n\t}\n}\n\nfunction reinsertChildren(parent, target) {\n\twhile (parent.firstChild) target.appendChild(parent.firstChild);\n}\n\nfunction reinsertAfter(before, target) {\n\twhile (before.nextSibling) target.appendChild(before.nextSibling);\n}\n\nfunction reinsertBefore(after, target) {\n\tvar parent = after.parentNode;\n\twhile (parent.firstChild !== after) target.appendChild(parent.firstChild);\n}\n\nfunction destroyEach(iterations) {\n\tfor (var i = 0; i < iterations.length; i += 1) {\n\t\tif (iterations[i]) iterations[i].d();\n\t}\n}\n\nfunction createFragment() {\n\treturn document.createDocumentFragment();\n}\n\nfunction createElement(name) {\n\treturn document.createElement(name);\n}\n\nfunction createSvgElement(name) {\n\treturn document.createElementNS('http://www.w3.org/2000/svg', name);\n}\n\nfunction createText(data) {\n\treturn document.createTextNode(data);\n}\n\nfunction createComment() {\n\treturn document.createComment('');\n}\n\nfunction addListener(node, event, handler) {\n\tnode.addEventListener(event, handler, false);\n}\n\nfunction removeListener(node, event, handler) {\n\tnode.removeEventListener(event, handler, false);\n}\n\nfunction setAttribute(node, attribute, value) {\n\tnode.setAttribute(attribute, value);\n}\n\nfunction setXlinkAttribute(node, attribute, value) {\n\tnode.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\n\nfunction getBindingGroupValue(group) {\n\tvar value = [];\n\tfor (var i = 0; i < group.length; i += 1) {\n\t\tif (group[i].checked) value.push(group[i].__value);\n\t}\n\treturn value;\n}\n\nfunction toNumber(value) {\n\treturn value === '' ? undefined : +value;\n}\n\nfunction timeRangesToArray(ranges) {\n\tvar array = [];\n\tfor (var i = 0; i < ranges.length; i += 1) {\n\t\tarray.push({ start: ranges.start(i), end: ranges.end(i) });\n\t}\n\treturn array;\n}\n\nfunction children (element) {\n\treturn Array.from(element.childNodes);\n}\n\nfunction claimElement (nodes, name, attributes, svg) {\n\tfor (var i = 0; i < nodes.length; i += 1) {\n\t\tvar node = nodes[i];\n\t\tif (node.nodeName === name) {\n\t\t\tfor (var j = 0; j < node.attributes.length; j += 1) {\n\t\t\t\tvar attribute = node.attributes[j];\n\t\t\t\tif (!attributes[attribute.name]) node.removeAttribute(attribute.name);\n\t\t\t}\n\t\t\treturn nodes.splice(i, 1)[0]; // TODO strip unwanted attributes\n\t\t}\n\t}\n\n\treturn svg ? createSvgElement(name) : createElement(name);\n}\n\nfunction claimText (nodes, data) {\n\tfor (var i = 0; i < nodes.length; i += 1) {\n\t\tvar node = nodes[i];\n\t\tif (node.nodeType === 3) {\n\t\t\tnode.data = data;\n\t\t\treturn nodes.splice(i, 1)[0];\n\t\t}\n\t}\n\n\treturn createText(data);\n}\n\nfunction setInputType(input, type) {\n\ttry {\n\t\tinput.type = type;\n\t} catch (e) {}\n}\n\nfunction setStyle(node, key, value) {\n\tnode.style.setProperty(key, value);\n}\n\nfunction linear(t) {\n\treturn t;\n}\n\nfunction generateRule(\n\ta,\n\tb,\n\tdelta,\n\tduration,\n\tease,\n\tfn\n) {\n\tvar keyframes = '{\\n';\n\n\tfor (var p = 0; p <= 1; p += 16.666 / duration) {\n\t\tvar t = a + delta * ease(p);\n\t\tkeyframes += p * 100 + '%{' + fn(t) + '}\\n';\n\t}\n\n\treturn keyframes + '100% {' + fn(b) + '}\\n}';\n}\n\n// https://github.com/darkskyapp/string-hash/blob/master/index.js\nfunction hash(str) {\n\tvar hash = 5381;\n\tvar i = str.length;\n\n\twhile (i--) hash = ((hash << 5) - hash) ^ str.charCodeAt(i);\n\treturn hash >>> 0;\n}\n\nfunction wrapTransition(component, node, fn, params, intro, outgroup) {\n\tvar obj = fn(node, params);\n\tvar duration = obj.duration || 300;\n\tvar ease = obj.easing || linear;\n\tvar cssText;\n\n\t// TODO share <style> tag between all transitions?\n\tif (obj.css && !transitionManager.stylesheet) {\n\t\tvar style = createElement('style');\n\t\tdocument.head.appendChild(style);\n\t\ttransitionManager.stylesheet = style.sheet;\n\t}\n\n\tif (intro) {\n\t\tif (obj.css && obj.delay) {\n\t\t\tcssText = node.style.cssText;\n\t\t\tnode.style.cssText += obj.css(0);\n\t\t}\n\n\t\tif (obj.tick) obj.tick(0);\n\t}\n\n\treturn {\n\t\tt: intro ? 0 : 1,\n\t\trunning: false,\n\t\tprogram: null,\n\t\tpending: null,\n\t\trun: function(intro, callback) {\n\t\t\tvar program = {\n\t\t\t\tstart: window.performance.now() + (obj.delay || 0),\n\t\t\t\tintro: intro,\n\t\t\t\tcallback: callback\n\t\t\t};\n\n\t\t\tif (obj.delay) {\n\t\t\t\tthis.pending = program;\n\t\t\t} else {\n\t\t\t\tthis.start(program);\n\t\t\t}\n\n\t\t\tif (!this.running) {\n\t\t\t\tthis.running = true;\n\t\t\t\ttransitionManager.add(this);\n\t\t\t}\n\t\t},\n\t\tstart: function(program) {\n\t\t\tcomponent.fire(program.intro ? 'intro.start' : 'outro.start', { node: node });\n\n\t\t\tprogram.a = this.t;\n\t\t\tprogram.b = program.intro ? 1 : 0;\n\t\t\tprogram.delta = program.b - program.a;\n\t\t\tprogram.duration = duration * Math.abs(program.b - program.a);\n\t\t\tprogram.end = program.start + program.duration;\n\n\t\t\tif (obj.css) {\n\t\t\t\tif (obj.delay) node.style.cssText = cssText;\n\n\t\t\t\tprogram.rule = generateRule(\n\t\t\t\t\tprogram.a,\n\t\t\t\t\tprogram.b,\n\t\t\t\t\tprogram.delta,\n\t\t\t\t\tprogram.duration,\n\t\t\t\t\tease,\n\t\t\t\t\tobj.css\n\t\t\t\t);\n\n\t\t\t\ttransitionManager.addRule(program.rule, program.name = '__svelte_' + hash(program.rule));\n\n\t\t\t\tnode.style.animation = (node.style.animation || '')\n\t\t\t\t\t.split(', ')\n\t\t\t\t\t.filter(function(anim) {\n\t\t\t\t\t\t// when introing, discard old animations if there are any\n\t\t\t\t\t\treturn anim && (program.delta < 0 || !/__svelte/.test(anim));\n\t\t\t\t\t})\n\t\t\t\t\t.concat(program.name + ' ' + duration + 'ms linear 1 forwards')\n\t\t\t\t\t.join(', ');\n\t\t\t}\n\n\t\t\tthis.program = program;\n\t\t\tthis.pending = null;\n\t\t},\n\t\tupdate: function(now) {\n\t\t\tvar program = this.program;\n\t\t\tif (!program) return;\n\n\t\t\tvar p = now - program.start;\n\t\t\tthis.t = program.a + program.delta * ease(p / program.duration);\n\t\t\tif (obj.tick) obj.tick(this.t);\n\t\t},\n\t\tdone: function() {\n\t\t\tvar program = this.program;\n\t\t\tthis.t = program.b;\n\t\t\tif (obj.tick) obj.tick(this.t);\n\t\t\tif (obj.css) transitionManager.deleteRule(node, program.name);\n\t\t\tprogram.callback();\n\t\t\tprogram = null;\n\t\t\tthis.running = !!this.pending;\n\t\t},\n\t\tabort: function() {\n\t\t\tif (obj.tick) obj.tick(1);\n\t\t\tif (obj.css) transitionManager.deleteRule(node, this.program.name);\n\t\t\tthis.program = this.pending = null;\n\t\t\tthis.running = false;\n\t\t}\n\t};\n}\n\nvar transitionManager = {\n\trunning: false,\n\ttransitions: [],\n\tbound: null,\n\tstylesheet: null,\n\tactiveRules: {},\n\n\tadd: function(transition) {\n\t\tthis.transitions.push(transition);\n\n\t\tif (!this.running) {\n\t\t\tthis.running = true;\n\t\t\trequestAnimationFrame(this.bound || (this.bound = this.next.bind(this)));\n\t\t}\n\t},\n\n\taddRule: function(rule, name) {\n\t\tif (!this.activeRules[name]) {\n\t\t\tthis.activeRules[name] = true;\n\t\t\tthis.stylesheet.insertRule('@keyframes ' + name + ' ' + rule, this.stylesheet.cssRules.length);\n\t\t}\n\t},\n\n\tnext: function() {\n\t\tthis.running = false;\n\n\t\tvar now = window.performance.now();\n\t\tvar i = this.transitions.length;\n\n\t\twhile (i--) {\n\t\t\tvar transition = this.transitions[i];\n\n\t\t\tif (transition.program && now >= transition.program.end) {\n\t\t\t\ttransition.done();\n\t\t\t}\n\n\t\t\tif (transition.pending && now >= transition.pending.start) {\n\t\t\t\ttransition.start(transition.pending);\n\t\t\t}\n\n\t\t\tif (transition.running) {\n\t\t\t\ttransition.update(now);\n\t\t\t\tthis.running = true;\n\t\t\t} else if (!transition.pending) {\n\t\t\t\tthis.transitions.splice(i, 1);\n\t\t\t}\n\t\t}\n\n\t\tif (this.running) {\n\t\t\trequestAnimationFrame(this.bound);\n\t\t} else if (this.stylesheet) {\n\t\t\tvar i = this.stylesheet.cssRules.length;\n\t\t\twhile (i--) this.stylesheet.deleteRule(i);\n\t\t\tthis.activeRules = {};\n\t\t}\n\t},\n\n\tdeleteRule: function(node, name) {\n\t\tnode.style.animation = node.style.animation\n\t\t\t.split(', ')\n\t\t\t.filter(function(anim) {\n\t\t\t\treturn anim.slice(0, name.length) !== name;\n\t\t\t})\n\t\t\t.join(', ');\n\t}\n};\n\nfunction blankObject() {\n\treturn Object.create(null);\n}\n\nfunction destroy(detach) {\n\tthis.destroy = noop;\n\tthis.fire('destroy');\n\tthis.set = this.get = noop;\n\n\tif (detach !== false) this._fragment.u();\n\tthis._fragment.d();\n\tthis._fragment = this._state = null;\n}\n\nfunction destroyDev(detach) {\n\tdestroy.call(this, detach);\n\tthis.destroy = function() {\n\t\tconsole.warn('Component was already destroyed');\n\t};\n}\n\nfunction differs(a, b) {\n\treturn a !== b || ((a && typeof a === 'object') || typeof a === 'function');\n}\n\nfunction dispatchObservers(component, group, changed, newState, oldState) {\n\tfor (var key in group) {\n\t\tif (!changed[key]) continue;\n\n\t\tvar newValue = newState[key];\n\t\tvar oldValue = oldState[key];\n\n\t\tvar callbacks = group[key];\n\t\tif (!callbacks) continue;\n\n\t\tfor (var i = 0; i < callbacks.length; i += 1) {\n\t\t\tvar callback = callbacks[i];\n\t\t\tif (callback.__calling) continue;\n\n\t\t\tcallback.__calling = true;\n\t\t\tcallback.call(component, newValue, oldValue);\n\t\t\tcallback.__calling = false;\n\t\t}\n\t}\n}\n\nfunction fire(eventName, data) {\n\tvar handlers =\n\t\teventName in this._handlers && this._handlers[eventName].slice();\n\tif (!handlers) return;\n\n\tfor (var i = 0; i < handlers.length; i += 1) {\n\t\thandlers[i].call(this, data);\n\t}\n}\n\nfunction get(key) {\n\treturn key ? this._state[key] : this._state;\n}\n\nfunction init(component, options) {\n\tcomponent.options = options;\n\n\tcomponent._observers = { pre: blankObject(), post: blankObject() };\n\tcomponent._handlers = blankObject();\n\tcomponent._root = options._root || component;\n\tcomponent._bind = options._bind;\n}\n\nfunction observe(key, callback, options) {\n\tvar group = options && options.defer\n\t\t? this._observers.post\n\t\t: this._observers.pre;\n\n\t(group[key] || (group[key] = [])).push(callback);\n\n\tif (!options || options.init !== false) {\n\t\tcallback.__calling = true;\n\t\tcallback.call(this, this._state[key]);\n\t\tcallback.__calling = false;\n\t}\n\n\treturn {\n\t\tcancel: function() {\n\t\t\tvar index = group[key].indexOf(callback);\n\t\t\tif (~index) group[key].splice(index, 1);\n\t\t}\n\t};\n}\n\nfunction observeDev(key, callback, options) {\n\tvar c = (key = '' + key).search(/[^\\w]/);\n\tif (c > -1) {\n\t\tvar message =\n\t\t\t'The first argument to component.observe(...) must be the name of a top-level property';\n\t\tif (c > 0)\n\t\t\tmessage += \", i.e. '\" + key.slice(0, c) + \"' rather than '\" + key + \"'\";\n\n\t\tthrow new Error(message);\n\t}\n\n\treturn observe.call(this, key, callback, options);\n}\n\nfunction on(eventName, handler) {\n\tif (eventName === 'teardown') return this.on('destroy', handler);\n\n\tvar handlers = this._handlers[eventName] || (this._handlers[eventName] = []);\n\thandlers.push(handler);\n\n\treturn {\n\t\tcancel: function() {\n\t\t\tvar index = handlers.indexOf(handler);\n\t\t\tif (~index) handlers.splice(index, 1);\n\t\t}\n\t};\n}\n\nfunction onDev(eventName, handler) {\n\tif (eventName === 'teardown') {\n\t\tconsole.warn(\n\t\t\t\"Use component.on('destroy', ...) instead of component.on('teardown', ...) which has been deprecated and will be unsupported in Svelte 2\"\n\t\t);\n\t\treturn this.on('destroy', handler);\n\t}\n\n\treturn on.call(this, eventName, handler);\n}\n\nfunction set(newState) {\n\tthis._set(assign({}, newState));\n\tif (this._root._lock) return;\n\tthis._root._lock = true;\n\tcallAll(this._root._beforecreate);\n\tcallAll(this._root._oncreate);\n\tcallAll(this._root._aftercreate);\n\tthis._root._lock = false;\n}\n\nfunction _set(newState) {\n\tvar oldState = this._state,\n\t\tchanged = {},\n\t\tdirty = false;\n\n\tfor (var key in newState) {\n\t\tif (differs(newState[key], oldState[key])) changed[key] = dirty = true;\n\t}\n\tif (!dirty) return;\n\n\tthis._state = assign({}, oldState, newState);\n\tthis._recompute(changed, this._state);\n\tif (this._bind) this._bind(changed, this._state);\n\tdispatchObservers(this, this._observers.pre, changed, this._state, oldState);\n\tthis._fragment.p(changed, this._state);\n\tdispatchObservers(this, this._observers.post, changed, this._state, oldState);\n}\n\nfunction _setDev(newState) {\n\tif (typeof newState !== 'object') {\n\t\tthrow new Error(\n\t\t\tthis._debugName + ' .set was called without an object of data key-values to update.'\n\t\t);\n\t}\n\n\tthis._checkReadOnly(newState);\n\t_set.call(this, newState);\n}\n\nfunction callAll(fns) {\n\twhile (fns && fns.length) fns.pop()();\n}\n\nfunction _mount(target, anchor) {\n\tthis._fragment.m(target, anchor);\n}\n\nfunction _unmount() {\n\tthis._fragment.u();\n}\n\nvar proto = {\n\tdestroy: destroy,\n\tget: get,\n\tfire: fire,\n\tobserve: observe,\n\ton: on,\n\tset: set,\n\tteardown: destroy,\n\t_recompute: noop,\n\t_set: _set,\n\t_mount: _mount,\n\t_unmount: _unmount\n};\n\nvar protoDev = {\n\tdestroy: destroyDev,\n\tget: get,\n\tfire: fire,\n\tobserve: observeDev,\n\ton: onDev,\n\tset: set,\n\tteardown: destroyDev,\n\t_recompute: noop,\n\t_set: _setDev,\n\t_mount: _mount,\n\t_unmount: _unmount\n};\n\nexport { blankObject, destroy, destroyDev, differs, dispatchObservers, fire, get, init, observe, observeDev, on, onDev, set, _set, _setDev, callAll, _mount, _unmount, proto, protoDev, appendNode, insertNode, detachNode, detachBetween, detachBefore, detachAfter, reinsertBetween, reinsertChildren, reinsertAfter, reinsertBefore, destroyEach, createFragment, createElement, createSvgElement, createText, createComment, addListener, removeListener, setAttribute, setXlinkAttribute, getBindingGroupValue, toNumber, timeRangesToArray, children, claimElement, claimText, setInputType, setStyle, linear, generateRule, hash, wrapTransition, transitionManager, noop, assign };\n","<div style=\"display: {{show ? 'block' : 'none'}}\">\r\n    <div class=\"cl-editor-overlay\" on:click=\"cancel()\"></div>\r\n    <div class=\"cl-editor-modal\">\r\n        <div class=\"modal-box\">\r\n            <span class=\"modal-title\">{{title}}</span>\r\n            <form on:submit=\"confirm(event)\">\r\n                <label class=\"modal-label {{error ? 'input-error' : ''}}\">\r\n                    <input ref:text on:keyup=\"hideError()\" type=\"text\" name=\"text\" bind:value=\"text\">\r\n                    <span class=\"input-info\">\r\n                        <span>{{label}}</span>\r\n                        {{#if error}}\r\n                        <span class=\"msg-error\">Required</span>\r\n                        {{/if}}\r\n                    </span>\r\n                </label>\r\n                <button class=\"modal-button modal-submit\" type=\"submit\">Confirm</button>\r\n                <button class=\"modal-button modal-reset\" type=\"reset\" on:click=\"cancel()\">Cancel</button>\r\n            </form>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<script>\r\n    export default {\r\n        data() {\r\n            return {\r\n                show: false,\r\n                text: '',\r\n                event: '',\r\n                title: '',\r\n                label: '',\r\n                error: false\r\n            }\r\n        },\r\n        oncreate() {\r\n            this.observe('show', show => {\r\n                if (show) {\r\n                    setTimeout(() => {\r\n                        this.refs.text.focus();\r\n                    });\r\n                }\r\n            }, {init: false});\r\n        },\r\n        methods: {\r\n            confirm: function(event) {\r\n                event.preventDefault();\r\n                const text = this.get('text');\r\n                if (text) {\r\n                    this.fire(this.get('event'), text);\r\n                    this.cancel();\r\n                } else {\r\n                    this.set({error: true});\r\n                    this.refs.text.focus();\r\n                }\r\n            },\r\n            cancel: function() {\r\n                this.set({show: false, text: '', error: false});\r\n            },\r\n            hideError: function() {\r\n                this.set({error: false});\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style>\r\n    .cl-editor-modal {\r\n        position: absolute;\r\n        top: 37px;\r\n        left: 50%;\r\n        -webkit-transform: translateX(-50%);\r\n        transform: translateX(-50%);\r\n        max-width: 520px;\r\n        width: 100%;\r\n        height: 140px;\r\n        backface-visibility: hidden;\r\n        z-index: 11;\r\n    }\r\n\r\n    .cl-editor-overlay {\r\n        position: absolute;\r\n        background-color: rgba(255,255,255,.5);\r\n        height: 100%;\r\n        width: 100%;\r\n        left: 0;\r\n        top: 0;\r\n        z-index: 10;\r\n    }\r\n\r\n    .modal-box {\r\n        position: absolute;\r\n        top: 0;\r\n        left: 50%;\r\n        -webkit-transform: translateX(-50%);\r\n        transform: translateX(-50%);\r\n        max-width: 500px;\r\n        width: calc(100% - 20px);\r\n        padding-bottom: 36px;\r\n        z-index: 1;\r\n        background-color: #FFF;\r\n        text-align: center;\r\n        font-size: 14px;\r\n        box-shadow: rgba(0,0,0,.2) 0 2px 3px;\r\n        -webkit-backface-visibility: hidden;\r\n        backface-visibility: hidden;\r\n    }\r\n\r\n    .modal-title {\r\n        font-size: 24px;\r\n        font-weight: 700;\r\n        margin: 0 0 20px;\r\n        padding: 2px 0 4px;\r\n        display: block;\r\n        border-bottom: 1px solid #EEE;\r\n        color: #333;\r\n        background: #fbfcfc;\r\n    }\r\n\r\n    .modal-label {\r\n        display: block;\r\n        position: relative;\r\n        margin: 15px 12px;\r\n        height: 29px;\r\n        line-height: 29px;\r\n        overflow: hidden;\r\n    }\r\n\r\n    .modal-label input {\r\n        position: absolute;\r\n        top: 0;\r\n        right: 0;\r\n        height: 27px;\r\n        line-height: 25px;\r\n        border: 1px solid #DEDEDE;\r\n        background: #fff;\r\n        font-size: 14px;\r\n        max-width: 330px;\r\n        width: 70%;\r\n        padding: 0 7px;\r\n        transition: all 150ms;\r\n    }\r\n\r\n    .modal-label input:focus {\r\n        outline: none;\r\n    }\r\n\r\n    .input-error input {\r\n        border: 1px solid #e74c3c;\r\n    }\r\n\r\n    .input-info {\r\n        display: block;\r\n        text-align: left;\r\n        height: 25px;\r\n        line-height: 25px;\r\n        transition: all 150ms;\r\n    }\r\n\r\n    .input-info span {\r\n        display: block;\r\n        color: #69878f;\r\n        background-color: #fbfcfc;\r\n        border: 1px solid #DEDEDE;\r\n        padding: 0 7px;\r\n        width: 150px;\r\n    }\r\n\r\n    .input-error .input-info {\r\n        margin-top: -27px;\r\n    }\r\n\r\n    .input-error .msg-error {\r\n        color: #e74c3c;\r\n    }\r\n\r\n    .modal-button {\r\n        position: absolute;\r\n        bottom: 10px;\r\n        right: 0;\r\n        text-decoration: none;\r\n        color: #FFF;\r\n        display: block;\r\n        width: 100px;\r\n        height: 35px;\r\n        line-height: 33px;\r\n        margin: 0 10px;\r\n        background-color: #333;\r\n        border: none;\r\n        cursor: pointer;\r\n        font-family: \"Lato\",Helvetica,Verdana,sans-serif;\r\n        font-size: 16px;\r\n        transition: all 150ms;\r\n    }\r\n\r\n    .modal-submit {\r\n        right: 110px;\r\n        background: #2bc06a;\r\n    }\r\n\r\n    .modal-reset {\r\n        color: #555;\r\n        background: #e6e6e6;\r\n    }\r\n</style>","<div style=\"display: {{show ? 'block' : 'none'}}\">\r\n    <div class=\"color-picker-overlay\" on:click=\"close()\"></div>\r\n    <div class=\"color-picker-wrapper\">\r\n        {{#each btns as btn}}\r\n        <button type=\"button\" class=\"color-picker-btn\" style=\"background-color:{{btn.color}};\" on:click=\"selectColor(btn)\">{{btn.text || ''}}</button>\r\n        {{/each}}\r\n    </div>\r\n</div>\r\n\r\n<script>\r\n    const colors = ['ffffff', '000000', 'eeece1', '1f497d', '4f81bd', 'c0504d', '9bbb59', '8064a2', '4bacc6', 'f79646', 'ffff00', 'f2f2f2', '7f7f7f', 'ddd9c3', 'c6d9f0', 'dbe5f1', 'f2dcdb', 'ebf1dd', 'e5e0ec', 'dbeef3', 'fdeada', 'fff2ca', 'd8d8d8', '595959', 'c4bd97', '8db3e2', 'b8cce4', 'e5b9b7', 'd7e3bc', 'ccc1d9', 'b7dde8', 'fbd5b5', 'ffe694', 'bfbfbf', '3f3f3f', '938953', '548dd4', '95b3d7', 'd99694', 'c3d69b', 'b2a2c7', 'b7dde8', 'fac08f', 'f2c314', 'a5a5a5', '262626', '494429', '17365d', '366092', '953734', '76923c', '5f497a', '92cddc', 'e36c09', 'c09100', '7f7f7f', '0c0c0c', '1d1b10', '0f243e', '244061', '632423', '4f6128', '3f3151', '31859b', '974806', '7f6000']\r\n\r\n    const getBtns = () => {\r\n        const btns = colors.map((color) => ({ color: `#${color}` }));\r\n        btns.push({ text: '#', modal: true });\r\n        return btns;\r\n    }\r\n    export default {\r\n        data() {\r\n            return {\r\n                show: false,\r\n                btns: [],\r\n                event: ''\r\n            }\r\n        },\r\n        oncreate() {\r\n            this.set({btns: getBtns()});\r\n        },\r\n        methods: {\r\n            close: function() {\r\n                this.set({show: false});\r\n            },\r\n            selectColor: function(btn) {\r\n                this.fire(this.get('event'), btn);\r\n                this.close();\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style>\r\n    .color-picker-wrapper {\r\n        border: 1px solid #ecf0f1;\r\n        border-top: none;\r\n        background: #FFF;\r\n        box-shadow: rgba(0,0,0,.1) 0 2px 3px;\r\n        width: 290px;\r\n        left: 50%;\r\n        -webkit-transform: translateX(-50%);\r\n        transform: translateX(-50%);\r\n        padding: 0;\r\n        position: absolute;\r\n        top: 37px;\r\n        z-index: 11;\r\n    }\r\n\r\n    .color-picker-overlay {\r\n        position: absolute;\r\n        background-color: rgba(255,255,255,.5);\r\n        height: 100%;\r\n        width: 100%;\r\n        left: 0;\r\n        top: 0;\r\n        z-index: 10;\r\n    }\r\n\r\n    .color-picker-btn {\r\n        display: block;\r\n        position: relative;\r\n        float: left;\r\n        height: 20px;\r\n        width: 20px;\r\n        border: 1px solid #333;\r\n        padding: 0;\r\n        margin: 2px;\r\n        line-height: 35px;\r\n        text-decoration: none;\r\n        background: #FFF;\r\n        color: #333!important;\r\n        cursor: pointer;\r\n        text-align: left;\r\n        font-size: 15px;\r\n        transition: all 150ms;\r\n        line-height: 20px;\r\n        padding: 0px 5px;\r\n    }\r\n\r\n    .color-picker-btn:hover::after {\r\n        content: \" \";\r\n        display: block;\r\n        position: absolute;\r\n        top: -5px;\r\n        left: -5px;\r\n        height: 27px;\r\n        width: 27px;\r\n        background: inherit;\r\n        border: 1px solid #FFF;\r\n        box-shadow: #000 0 0 2px;\r\n        z-index: 10;\r\n    }\r\n</style>","<:Window on:click=\"_documentClick(event)\" />\r\n<div class=\"cl\" ref:editorWrapper>\r\n  <div class=\"cl-actionbar\">\r\n    {{#each actionBtns as action}}\r\n      <button \r\n        class=\"cl-button {{action.active ? 'active' : ''}}\" \r\n        title=\"{{action.title}}\" \r\n        on:click=\"_btnClicked(action)\" \r\n        disabled=\"{{action.disabled}}\">\r\n        {{{action.icon}}}\r\n      </button>\r\n    {{/each}}\r\n  </div>\r\n  <div ref:editor \r\n    class=\"cl-content\"\r\n    style=\"height: {{height}}\"\r\n    contenteditable=\"true\"\r\n    on:input=\"_onChange(event.target.innerHTML)\" \r\n    on:mouseup=\"_handleButtonStatus()\" \r\n    on:keyup=\"_handleButtonStatus()\"\r\n    on:paste=\"_onPaste(event)\">\r\n  </div>\r\n  \r\n  <textarea ref:raw class=\"cl-textarea\" style=\"max-height: {{height}}; min-height: {{height}}\"></textarea>\r\n  <div ref:modal></div>\r\n  <div ref:colorPicker></div>\r\n</div>\r\n\r\n<script>\r\n  import {\r\n    getTagsRecursive,\r\n    saveRange,\r\n    restoreRange,\r\n    exec,\r\n    cleanHtml,\r\n    getActionBtns,\r\n    getNewActionObj,\r\n    removeBadTags,\r\n    isEditorClick\r\n  } from './helpers/util';\r\n  import actions from './helpers/actions';\r\n  import EditorModal from './helpers/EditorModal.html';\r\n  import EditorColorPicker from './helpers/EditorColorPicker.html';\r\n\r\n  export default {\r\n    data() {\r\n      return {\r\n        actionBtns: [],\r\n        height: '300px',\r\n        html: '',\r\n        removeFormatTags: ['h1', 'h2', 'blockquote']\r\n      }\r\n    },\r\n    oncreate() {\r\n      const data = this.options.data || {};\r\n      const actionObj = getNewActionObj(actions, data.actions);\r\n      this.set({ actionBtns: getActionBtns(actionObj), actionObj });\r\n      this.setHtml(data.html);\r\n      this.modal = new EditorModal({ target: this.refs.modal });\r\n      this.colorPicker = new EditorColorPicker({ target: this.refs.colorPicker });\r\n      this.helper = {\r\n        foreColor: false,\r\n        backColor: false,\r\n        foreColorModal: false,\r\n        backColorModal: false,\r\n        image: false,\r\n        link: false,\r\n        showEditor: true,\r\n        blurActive: false\r\n      }\r\n    },\r\n    methods: {\r\n      _btnClicked: function(action) {\r\n        this.refs.editor.focus();\r\n        saveRange(this.refs.editor);\r\n        restoreRange(this.refs.editor);\r\n        action.result.call(this);\r\n        this._handleButtonStatus();\r\n      },\r\n      _handleButtonStatus: function(clearBtns) {\r\n        const tags = clearBtns ? [] : getTagsRecursive(document.getSelection().focusNode);\r\n        const actionObj = this.get('actionObj');\r\n        Object.keys(actionObj).forEach((action) => actionObj[action].active = false);\r\n        tags.forEach((tag) => (actionObj[tag.toLowerCase()] || {}).active = true);\r\n        this.set({ actionBtns: getActionBtns(actionObj), actionObj });\r\n      },\r\n      _onPaste: function(event) {\r\n        event.preventDefault();\r\n        exec('insertHTML', event.clipboardData.getData('text') ? event.clipboardData.getData('text') : cleanHtml(event.clipboardData.getData('text/html')));\r\n      },\r\n      _onChange: function(html) {\r\n        this.fire('change', html);\r\n      },\r\n      _documentClick: function(event) {\r\n        if (!isEditorClick(event.target, this.refs.editorWrapper) && this.helper.blurActive) {\r\n          this.fire('blur', event);\r\n        }\r\n        this.helper.blurActive = true;\r\n      },\r\n      exec: (cmd, value) => {\r\n        exec(cmd, value);\r\n      },\r\n      getHtml: function(sanitize) {\r\n        return sanitize ? removeBadTags(this.refs.editor.innerHTML) : this.refs.editor.innerHTML;\r\n      },\r\n      getText: function() {\r\n        return this.refs.editor.innerText;\r\n      },\r\n      setHtml: function(html, sanitize) {\r\n        this.refs.editor.innerHTML = sanitize ? removeBadTags(html) : (html || '');\r\n      },\r\n      saveRange: function() {\r\n        saveRange(this.refs.editor);\r\n      },\r\n      restoreRange: function() {\r\n        restoreRange(this.refs.editor);\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style type=\"text/css\">\r\n  .cl * {\r\n    box-sizing: border-box;\r\n  }\r\n\r\n  .cl {\r\n    box-shadow: 0 2px 3px rgba(10, 10, 10, 0.1), 0 0 0 1px rgba(10, 10, 10, 0.1);\r\n    box-sizing: border-box;\r\n    width: 100%;\r\n    position: relative;\r\n  }\r\n\r\n  .cl-content {\r\n    height: 300px;\r\n    outline: 0;\r\n    overflow-y: auto;\r\n    padding: 10px;\r\n    width: 100%;\r\n    background-color: white;\r\n  }\r\n\r\n  .cl-actionbar {\r\n    background-color: #ecf0f1;\r\n    border-bottom: 1px solid rgba(10, 10, 10, 0.1);\r\n    width: 100%;\r\n  }\r\n\r\n  .cl-button {\r\n    background-color: transparent;\r\n    border: none;\r\n    cursor: pointer;\r\n    height: 35px;\r\n    outline: 0;\r\n    width: 35px;\r\n    vertical-align: top;\r\n    position: relative;\r\n  }\r\n\r\n  .cl-button:hover, .cl-button.active {\r\n    background-color: #fff;\r\n  }\r\n\r\n  .cl-button:disabled {\r\n    opacity: .5;\r\n    pointer-events: none;\r\n  }\r\n\r\n  .cl-textarea {\r\n    display: none;\r\n    max-width: 100%;\r\n    min-width: 100%;\r\n    border: none;\r\n    padding: 10px;\r\n  }\r\n\r\n  .cl-textarea:focus {\r\n    outline: none;\r\n  }\r\n\r\n</style>\r\n","let t: any = {};\r\n\r\nexport const exec = (command: string, value = null) => {\r\n  document.execCommand(command, false, value)\r\n}\r\n\r\nexport const getTagsRecursive = (element: HTMLElement | any, tags: string[]) => {\r\n  tags = tags || (element && element.tagName ? [element.tagName] : []);\r\n\r\n  if (element && element.parentNode) {\r\n    element = element.parentNode;\r\n  } else {\r\n    return tags;\r\n  }\r\n\r\n  const tag = element.tagName;\r\n  if (element.style && element.getAttribute) {\r\n    [element.style.textAlign || element.getAttribute('align'), element.style.color || tag === 'FONT' && 'forecolor', element.style.backgroundColor && 'backcolor']\r\n      .filter((item: string) => item)\r\n      .forEach((item: string) => tags.push(item));\r\n  }\r\n\r\n  if (tag === 'DIV') {\r\n    return tags;\r\n  }\r\n\r\n  tags.push(tag);\r\n\r\n  return getTagsRecursive(element, tags).filter((_tag) => _tag != null);\r\n}\r\n\r\nexport const saveRange = (editor: HTMLElement) => {\r\n  const documentSelection = document.getSelection();\r\n\r\n  t.range = null;\r\n\r\n  if (documentSelection.rangeCount) {\r\n      let savedRange = t.range = documentSelection.getRangeAt(0);\r\n      let range = document.createRange();\r\n      let rangeStart;\r\n      range.selectNodeContents(editor);\r\n      range.setEnd(savedRange.startContainer, savedRange.startOffset);\r\n      rangeStart = (range + '').length;\r\n      t.metaRange = {\r\n          start: rangeStart,\r\n          end: rangeStart + (savedRange + '').length\r\n      };\r\n  }\r\n}\r\nexport const restoreRange = (editor: HTMLElement) => {\r\n  let metaRange = t.metaRange;\r\n  let savedRange = t.range;\r\n  let documentSelection = document.getSelection();\r\n  let range;\r\n\r\n  if (!savedRange) {\r\n      return;\r\n  }\r\n\r\n  if (metaRange && metaRange.start !== metaRange.end) { // Algorithm from http://jsfiddle.net/WeWy7/3/\r\n      let charIndex = 0,\r\n          nodeStack = [editor],\r\n          node,\r\n          foundStart = false,\r\n          stop = false;\r\n\r\n      range = document.createRange();\r\n\r\n      while (!stop && (node = nodeStack.pop())) {\r\n          if (node.nodeType === 3) {\r\n              let nextCharIndex = charIndex + node.length;\r\n              if (!foundStart && metaRange.start >= charIndex && metaRange.start <= nextCharIndex) {\r\n                  range.setStart(node, metaRange.start - charIndex);\r\n                  foundStart = true;\r\n              }\r\n              if (foundStart && metaRange.end >= charIndex && metaRange.end <= nextCharIndex) {\r\n                  range.setEnd(node, metaRange.end - charIndex);\r\n                  stop = true;\r\n              }\r\n              charIndex = nextCharIndex;\r\n          } else {\r\n              let cn = node.childNodes;\r\n              let i = cn.length;\r\n\r\n              while (i > 0) {\r\n                  i -= 1;\r\n                  nodeStack.push(cn[i]);\r\n              }\r\n          }\r\n      }\r\n  }\r\n\r\n  documentSelection.removeAllRanges();\r\n  documentSelection.addRange(range || savedRange);\r\n}\r\n\r\nexport const cleanHtml = (input: string) => {\r\n    // remove line brakers and find relevant html\r\n    const html = input.replace(/\\r?\\n|\\r/g, ' ').match(/<!--StartFragment-->(.*?)<!--EndFragment-->/);\r\n    let output = html && html[1] || '';\r\n    output = output\r\n                // 1. removeMso classes\r\n                .replace(/(class=(\")?Mso[a-zA-Z]+(\")?)/g, ' ')\r\n                // 2. strip Word generated HTML comments\r\n                .replace(/<!--(.*?)-->/g, '')\r\n                // 3. remove tags leave content if any\r\n                .replace(new RegExp('<(/)*(meta|link|span|\\\\?xml:|st1:|o:|font|w:sdt)(.*?)>','gi'), '')\r\n                .replace(/<!\\[if !supportLists\\]>(.*?)<!\\[endif\\]>/gi, '')\r\n                .replace(/style=\"[^\"]*\"/gi, '')\r\n                .replace(/style='[^']*'/gi, '')\r\n                .replace(/&nbsp;/gi, ' ');\r\n                        \r\n    // 4. Remove everything in between and including tags '<style(.)style(.)>'\r\n    output = removeBadTags(output);\r\n    return output;\r\n}\r\n\r\nexport const unwrap = (wrapper: Node) => {\r\n\tconst docFrag = document.createDocumentFragment();\r\n\twhile (wrapper.firstChild) {\r\n\t\tconst child = wrapper.removeChild(wrapper.firstChild);\r\n\t\tdocFrag.appendChild(child);\r\n\t}\r\n\r\n\t// replace wrapper with document fragment\r\n\twrapper.parentNode.replaceChild(docFrag, wrapper);\r\n}\r\n\r\nexport const removeBlockTagsRecursive = (elements: HTMLCollection, tagsToRemove: string[]) => {\r\n  Array.from(elements).forEach((item: HTMLElement) => {\r\n    if (tagsToRemove.some((tag: string) => tag === item.tagName.toLowerCase())) {\r\n      if (item.children.length) {\r\n        removeBlockTagsRecursive(item.children, tagsToRemove);\r\n      }\r\n      unwrap(item);\r\n    }\r\n  });\r\n}\r\n\r\nexport const getActionBtns = (actions) => {\r\n  return Object.keys(actions).map((action) => actions[action]);\r\n}\r\n\r\nexport const getNewActionObj = (actions: any, userActions = []) => {\r\n    if (userActions && userActions.length) {\r\n        const newActions = {};\r\n        userActions.forEach((action) => {\r\n            if (typeof action === 'string') {\r\n                newActions[action] = Object.assign({}, actions[action]);\r\n            } else if (actions[action.name]) {\r\n                newActions[action.name] = Object.assign(actions[action.name], action);\r\n            } else {\r\n                newActions[action.name] = Object.assign({}, action);\r\n            }\r\n        });\r\n    \r\n        return newActions;\r\n    } else {\r\n        return actions;\r\n    }\r\n}\r\n\r\nexport const removeBadTags = (html: string) => {\r\n    ['style', 'script', 'applet', 'embed', 'noframes', 'noscript'].forEach((badTag: string) => {\r\n        html = html.replace(new RegExp(`<${badTag}.*?${badTag}(.*?)>`, 'gi'), '')\r\n    });\r\n\r\n    return html;\r\n}\r\n\r\nexport const isEditorClick = (target: HTMLElement, editorWrapper: HTMLElement) => {\r\n    if (target === editorWrapper) {\r\n        return true;\r\n    }\r\n    if (target.parentElement) {\r\n        return isEditorClick(target.parentElement, editorWrapper);\r\n    }\r\n    return false;\r\n}","import {exec, removeBlockTagsRecursive, getActionBtns, saveRange, restoreRange, unwrap} from './util';\r\n\r\nconst linkSvg = '<svg viewBox=\"0 0 72 72\" width=\"17px\" height=\"100%\"><path d=\"M31.1 48.9l-6.7 6.7c-.8.8-1.6.9-2.1.9s-1.4-.1-2.1-.9L15 50.4c-1.1-1.1-1.1-3.1 0-4.2l6.1-6.1.2-.2 6.5-6.5c-1.2-.6-2.5-.9-3.8-.9-2.3 0-4.6.9-6.3 2.6L11 41.8c-3.5 3.5-3.5 9.2 0 12.7l5.2 5.2c1.7 1.7 4 2.6 6.3 2.6s4.6-.9 6.3-2.6l6.7-6.7c2.5-2.6 3.1-6.7 1.5-10l-5.9 5.9zM38.7 22.5l6.7-6.7c.8-.8 1.6-.9 2.1-.9s1.4.1 2.1.9l5.2 5.2c1.1 1.1 1.1 3.1 0 4.2l-6.1 6.1-.2.2L42 38c1.2.6 2.5.9 3.8.9 2.3 0 4.6-.9 6.3-2.6l6.7-6.7c3.5-3.5 3.5-9.2 0-12.7l-5.2-5.2c-1.7-1.7-4-2.6-6.3-2.6s-4.6.9-6.3 2.6l-6.7 6.7c-2.7 2.7-3.3 6.9-1.7 10.2l6.1-6.1c0 .1 0 .1 0 0z\"></path><path d=\"M44.2 30.5c.2-.2.4-.6.4-.9 0-.3-.1-.6-.4-.9l-2.3-2.3c-.3-.2-.6-.4-.9-.4-.3 0-.6.1-.9.4L25.9 40.6c-.2.2-.4.6-.4.9 0 .3.1.6.4.9l2.3 2.3c.2.2.6.4.9.4.3 0 .6-.1.9-.4l14.2-14.2zM49.9 55.4h-8.5v-5h8.5v-8.9h5.2v8.9h8.5v5h-8.5v8.9h-5.2v-8.9z\"></path></svg>';\r\nconst unlinkSvg = '<svg viewBox=\"0 0 72 72\" width=\"17px\" height=\"100%\"><path d=\"M30.9 49.1l-6.7 6.7c-.8.8-1.6.9-2.1.9s-1.4-.1-2.1-.9l-5.2-5.2c-1.1-1.1-1.1-3.1 0-4.2l6.1-6.1.2-.2 6.5-6.5c-1.2-.6-2.5-.9-3.8-.9-2.3 0-4.6.9-6.3 2.6L10.8 42c-3.5 3.5-3.5 9.2 0 12.7l5.2 5.2c1.7 1.7 4 2.6 6.3 2.6s4.6-.9 6.3-2.6l6.7-6.7C38 50.5 38.6 46.3 37 43l-6.1 6.1zM38.5 22.7l6.7-6.7c.8-.8 1.6-.9 2.1-.9s1.4.1 2.1.9l5.2 5.2c1.1 1.1 1.1 3.1 0 4.2l-6.1 6.1-.2.2-6.5 6.5c1.2.6 2.5.9 3.8.9 2.3 0 4.6-.9 6.3-2.6l6.7-6.7c3.5-3.5 3.5-9.2 0-12.7l-5.2-5.2c-1.7-1.7-4-2.6-6.3-2.6s-4.6.9-6.3 2.6l-6.7 6.7c-2.7 2.7-3.3 6.9-1.7 10.2l6.1-6.1z\"></path><path d=\"M44.1 30.7c.2-.2.4-.6.4-.9 0-.3-.1-.6-.4-.9l-2.3-2.3c-.2-.2-.6-.4-.9-.4-.3 0-.6.1-.9.4L25.8 40.8c-.2.2-.4.6-.4.9 0 .3.1.6.4.9l2.3 2.3c.2.2.6.4.9.4.3 0 .6-.1.9-.4l14.2-14.2zM41.3 55.8v-5h22.2v5H41.3z\"></path></svg>';\r\n\r\nexport default {\r\n  viewHtml: {\r\n    icon: '<svg viewBox=\"0 0 72 72\" width=\"17px\" height=\"100%\"><path fill=\"none\" stroke=\"currentColor\" stroke-width=\"8\" stroke-miterlimit=\"10\" d=\"M26.9 17.9L9 36.2 26.9 54M45 54l17.9-18.3L45 17.9\"></path></svg>',\r\n    title: 'View HTML',\r\n    result: function() {\r\n      const _this = this;\r\n      const actionObj = this.get('actionObj');\r\n      this.helper.showEditor = !this.helper.showEditor;\r\n      this.refs.editor.style.display = this.helper.showEditor ? 'block' : 'none';\r\n      this.refs.raw.style.display = this.helper.showEditor ? 'none' : 'block';\r\n      if (this.helper.showEditor) {\r\n        this.refs.editor.innerHTML = this.refs.raw.value;\r\n      } else {\r\n        this.refs.raw.value = this.refs.editor.innerHTML;\r\n      }\r\n      setTimeout(() =>{\r\n        Object.keys(actionObj).forEach((action: string) => actionObj[action].disabled = !_this.helper.showEditor);\r\n        actionObj.viewHtml.disabled = false;\r\n        actionObj.viewHtml.active = !_this.helper.showEditor;\r\n        _this.set({ actionBtns: getActionBtns(actionObj),  actionObj });\r\n      })\r\n    }\r\n  },\r\n  undo: {\r\n    icon: '<svg viewBox=\"0 0 72 72\" width=\"17px\" height=\"100%\"><path d=\"M61.2 51.2c0-5.1-2.1-9.7-5.4-13.1-3.3-3.3-8-5.4-13.1-5.4H26.1v-12L10.8 36l15.3 15.3V39.1h16.7c3.3 0 6.4 1.3 8.5 3.5 2.2 2.2 3.5 5.2 3.5 8.5h6.4z\"></path></svg>',\r\n    title: 'Undo',\r\n    result: () => exec('undo')\r\n  },\r\n  redo: {\r\n    icon: '<svg viewBox=\"0 0 72 72\" width=\"17px\" height=\"100%\"><path d=\"M10.8 51.2c0-5.1 2.1-9.7 5.4-13.1 3.3-3.3 8-5.4 13.1-5.4H46v-12L61.3 36 45.9 51.3V39.1H29.3c-3.3 0-6.4 1.3-8.5 3.5-2.2 2.2-3.5 5.2-3.5 8.5h-6.5z\"></path></svg>',\r\n    title: 'Redo',\r\n    result: () => exec('redo')\r\n  },\r\n  b: {\r\n    icon: '<b>B</b>',\r\n    title: 'Bold',\r\n    result: () => exec('bold')\r\n  },\r\n  i: {\r\n    icon: '<i>I</i>',\r\n    title: 'Italic',\r\n    result: () => exec('italic')\r\n  },\r\n  u: {\r\n    icon: '<u>U</u>',\r\n    title: 'Underline',\r\n    result: () => exec('underline')\r\n  },\r\n  strike: {\r\n    icon: '<strike>S</strike>',\r\n    title: 'Strike-through',\r\n    result: () => exec('strikeThrough')\r\n  },\r\n  sup: {\r\n    icon: 'A<sup>2</sup>',\r\n    title: 'Superscript',\r\n    result: () => exec('superscript')\r\n  },\r\n  sub: {\r\n    icon: 'A<sub>2</sub>',\r\n    title: 'Subscript',\r\n    result: () => exec('subscript')\r\n  },\r\n  h1: {\r\n    icon: '<b>H<sub>1</sub></b>',\r\n    title: 'Heading 1',\r\n    result: () => exec('formatBlock', '<H1>')\r\n  },\r\n  h2: {\r\n    icon: '<b>H<sub>2</sub></b>',\r\n    title: 'Heading 2',\r\n    result: () => exec('formatBlock', '<H2>')\r\n  },\r\n  p: {\r\n    icon: '&#182;',\r\n    title: 'Paragraph',\r\n    result: () => exec('formatBlock', '<P>')\r\n  },\r\n  blockquote: {\r\n    icon: '&#8220; &#8221;',\r\n    title: 'Quote',\r\n    result: () => exec('formatBlock', '<BLOCKQUOTE>')\r\n  },\r\n  ol: {\r\n    icon: '<svg viewBox=\"0 0 72 72\" width=\"17px\" height=\"100%\"><path d=\"M27 14h36v8H27zM27 50h36v8H27zM27 32h36v8H27zM11.8 15.8V22h1.8v-7.8h-1.5l-2.1 1 .3 1.3zM12.1 38.5l.7-.6c1.1-1 2.1-2.1 2.1-3.4 0-1.4-1-2.4-2.7-2.4-1.1 0-2 .4-2.6.8l.5 1.3c.4-.3 1-.6 1.7-.6.9 0 1.3.5 1.3 1.1 0 .9-.9 1.8-2.6 3.3l-1 .9V40H15v-1.5h-2.9zM13.3 53.9c1-.4 1.4-1 1.4-1.8 0-1.1-.9-1.9-2.6-1.9-1 0-1.9.3-2.4.6l.4 1.3c.3-.2 1-.5 1.6-.5.8 0 1.2.3 1.2.8 0 .7-.8.9-1.4.9h-.7v1.3h.7c.8 0 1.6.3 1.6 1.1 0 .6-.5 1-1.4 1-.7 0-1.5-.3-1.8-.5l-.4 1.4c.5.3 1.3.6 2.3.6 2 0 3.2-1 3.2-2.4 0-1.1-.8-1.8-1.7-1.9z\"></path></svg>',\r\n    title: 'Ordered List',\r\n    result: () => exec('insertOrderedList')\r\n  },\r\n  ul: {\r\n    icon: '<svg viewBox=\"0 0 72 72\" width=\"17px\" height=\"100%\"><path d=\"M27 14h36v8H27zM27 50h36v8H27zM9 50h9v8H9zM9 32h9v8H9zM9 14h9v8H9zM27 32h36v8H27z\"></path></svg>',\r\n    title: 'Unordered List',\r\n    result: () => exec('insertUnorderedList')\r\n  },\r\n  line: {\r\n    icon: '&#8213;',\r\n    title: 'Horizontal Line',\r\n    result: () => exec('insertHorizontalRule')\r\n  },\r\n  left: {\r\n    icon: '<svg viewBox=\"0 0 72 72\" width=\"17px\" height=\"100%\"><path d=\"M9 14h54v8H9zM9 50h54v8H9zM9 32h36v8H9z\"></path></svg>',\r\n    title: 'Justify left',\r\n    result: () => exec('justifyLeft')\r\n  },\r\n  right: {\r\n    icon: '<svg viewBox=\"0 0 72 72\" width=\"17px\" height=\"100%\"><path d=\"M9 14h54v8H9zM9 50h54v8H9zM27 32h36v8H27z\"></path></svg>',\r\n    title: 'Justify right',\r\n    result: () => exec('justifyRight')\r\n  },\r\n  center: {\r\n    icon: '<svg viewBox=\"0 0 72 72\" width=\"17px\" height=\"100%\"><path d=\"M9 14h54v8H9zM9 50h54v8H9zM18 32h36v8H18z\"></path></svg>',\r\n    title: 'Justify center',\r\n    result: () => exec('justifyCenter')\r\n  },\r\n  justify: {\r\n    icon: '<svg viewBox=\"0 0 72 72\" width=\"17px\" height=\"100%\"><path d=\"M9 14h54v8H9zM9 50h54v8H9zM9 32h54v8H9z\"></path></svg>',\r\n    title: 'Justify full',\r\n    result: () => exec('justifyFull')\r\n  },\r\n  a: {\r\n    icon: linkSvg,\r\n    title: 'Insert link',\r\n    result: function() {\r\n      const actionObj = this.get('actionObj');\r\n      if (actionObj.a.active) {\r\n        const selection = window.getSelection();\r\n        const range = document.createRange();\r\n        range.selectNodeContents(document.getSelection().focusNode);\r\n        selection.removeAllRanges();\r\n        selection.addRange(range);\r\n        exec('unlink');\r\n        actionObj.a.title = 'Insert link';\r\n        actionObj.a.icon = linkSvg;\r\n        this.set({actionBtns: getActionBtns(actionObj), actionObj});\r\n      } else {\r\n        saveRange(this.refs.editor);\r\n        this.modal.set({show: true, event: 'linkUrl', title: 'Insert link', label: 'Url'});\r\n        if (!this.helper.link) {\r\n          this.helper.link = true;\r\n          this.modal.on('linkUrl', (url) => {\r\n            restoreRange(this.refs.editor);\r\n            exec('createLink', url);\r\n            actionObj.a.title = 'Unlink';\r\n            actionObj.a.icon = unlinkSvg;\r\n            \r\n            this.set({actionBtns: getActionBtns(actionObj), actionObj});\r\n          });\r\n        }\r\n      }\r\n\r\n    }\r\n  },\r\n  image: {\r\n    icon: '<svg viewBox=\"0 0 72 72\" width=\"17px\" height=\"100%\"><path d=\"M64 17v38H8V17h56m8-8H0v54h72V9z\"></path><path d=\"M17.5 22C15 22 13 24 13 26.5s2 4.5 4.5 4.5 4.5-2 4.5-4.5-2-4.5-4.5-4.5zM16 50h27L29.5 32zM36 36.2l8.9-8.5L60.2 50H45.9S35.6 35.9 36 36.2z\"></path></svg>',\r\n    title: 'Image',\r\n    result: function() {\r\n      saveRange(this.refs.editor);\r\n      this.modal.set({show: true, event: 'imageUrl', title: 'Insert image', label: 'Url'});\r\n      if (!this.helper.image) {\r\n        this.helper.image = true;\r\n        this.modal.on('imageUrl', (url: string) => {\r\n          restoreRange(this.refs.editor);\r\n          exec('insertImage', url);\r\n        });\r\n      }\r\n    }\r\n  },\r\n  forecolor: {\r\n    icon: '<svg viewBox=\"0 0 72 72\" width=\"17px\" height=\"100%\"><path d=\"M32 15h7.8L56 57.1h-7.9l-4-11.1H27.4l-4 11.1h-7.6L32 15zm-2.5 25.4h12.9L36 22.3h-.2l-6.3 18.1z\"></path></svg>',\r\n    title: 'Text color',\r\n    colorPicker: true,\r\n    result: function() {\r\n      showColorPicker.call(this, 'foreColor');\r\n    }\r\n  },\r\n  backcolor: {\r\n    icon: '<svg viewBox=\"0 0 72 72\" width=\"17px\" height=\"100%\"><path d=\"M36.5 22.3l-6.3 18.1H43l-6.3-18.1z\"></path><path d=\"M9 8.9v54.2h54.1V8.9H9zm39.9 48.2L45 46H28.2l-3.9 11.1h-7.6L32.8 15h7.8l16.2 42.1h-7.9z\"></path></svg>',\r\n    title: 'Background color',\r\n    colorPicker: true,\r\n    result: function() {\r\n      showColorPicker.call(this, 'backColor');\r\n    }\r\n  },\r\n  removeFormat: {\r\n    icon: '<svg viewBox=\"0 0 72 72\" width=\"17px\" height=\"100%\"><path d=\"M58.2 54.6L52 48.5l3.6-3.6 6.1 6.1 6.4-6.4 3.8 3.8-6.4 6.4 6.1 6.1-3.6 3.6-6.1-6.1-6.4 6.4-3.7-3.8 6.4-6.4zM21.7 52.1H50V57H21.7zM18.8 15.2h34.1v6.4H39.5v24.2h-7.4V21.5H18.8v-6.3z\"></path></svg>',\r\n    title: 'Remove format',\r\n    result: function() {\r\n      const selection = window.getSelection();\r\n      if (!selection.toString().length) {\r\n        removeBlockTagsRecursive(this.refs.editor.children, this.get('removeFormatTags'));\r\n        const range = document.createRange();\r\n        range.selectNodeContents(this.refs.editor);\r\n        selection.removeAllRanges();\r\n        selection.addRange(range);\r\n      }\r\n      exec('removeFormat');\r\n      selection.removeAllRanges();\r\n    }\r\n  }\r\n}\r\n\r\nconst showColorPicker = function(cmd) {\r\n  saveRange(this.refs.editor);\r\n  this.colorPicker.set({show: true, event: cmd});\r\n  if (!this.helper[cmd]) {\r\n    this.helper[cmd] = true;\r\n    this.colorPicker.on(cmd, (item) => {\r\n      if (item.modal) {\r\n        this.modal.set({show: true, event: 'colorHref', title: 'Text color', label: cmd === 'foreColor' ? 'Text color' : 'Background color'});\r\n        const command = cmd;\r\n        if (!this.helper[`${command}Modal`]) {\r\n          this.helper[`${command}Modal`] = true;\r\n          this.modal.on('colorHref', (color) => {\r\n            restoreRange(this.refs.editor);\r\n            exec(command, color);\r\n          });\r\n        }\r\n      } else {\r\n        restoreRange(this.refs.editor);\r\n        exec(cmd, item.color);\r\n      }\r\n    });\r\n  }\r\n}"],"names":["noop","assign","target","k","source","i","len","arguments","length","appendNode","node","appendChild","insertNode","anchor","insertBefore","detachNode","parentNode","removeChild","destroyEach","iterations","d","createElement","name","document","createText","data","createTextNode","addListener","event","handler","addEventListener","removeListener","removeEventListener","setAttribute","attribute","value","setStyle","key","style","setProperty","blankObject","Object","create","destroy","detach","this","fire","set","get","_fragment","u","_state","differs","a","b","dispatchObservers","component","group","changed","newState","oldState","newValue","oldValue","callbacks","callback","__calling","call","init","options","_observers","pre","post","_handlers","_root","_bind","callAll","fns","pop","observe","show","refs","text","focus","cancel","confirm","hideError","error","title","label","btns","getBtns","close","btn","color","selectColor","actionObj","getNewActionObj","actions","actionBtns","getActionBtns","setHtml","html","modal","EditorModal","colorPicker","EditorColorPicker","helper","_documentClick","_onChange","innerHTML","_handleButtonStatus","_onPaste","height","action","icon","active","disabled","_btnClicked","proto","eventName","handlers","slice","defer","push","index","indexOf","splice","on","_set","_lock","_beforecreate","_oncreate","_aftercreate","teardown","_recompute","dirty","p","_mount","m","_unmount","t","exec","command","execCommand","getTagsRecursive","element","tags","tagName","tag","getAttribute","textAlign","backgroundColor","filter","item","forEach","_tag","saveRange","editor","documentSelection","getSelection","range","rangeCount","savedRange","getRangeAt","createRange","rangeStart","selectNodeContents","setEnd","startContainer","startOffset","metaRange","restoreRange","start","end","charIndex","nodeStack","foundStart","stop","nodeType","nextCharIndex","setStart","cn","childNodes","removeAllRanges","addRange","cleanHtml","input","replace","match","output","RegExp","removeBadTags","unwrap","wrapper","docFrag","createDocumentFragment","firstChild","child","replaceChild","removeBlockTagsRecursive","elements","tagsToRemove","from","some","toLowerCase","children","keys","map","userActions","newActions","badTag","isEditorClick","editorWrapper","parentElement","linkSvg","_this","showEditor","display","raw","viewHtml","selection","window","focusNode","link","url","_this2","image","_this3","toString","showColorPicker","cmd","_this4","preventDefault","colors","result","clearBtns","clipboardData","getData","blurActive","sanitize","innerText"],"mappings":"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"}