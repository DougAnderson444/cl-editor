{"version":3,"file":"index.js","sources":["../node_modules/svelte/shared.js","../src/helpers/util.ts","../src/helpers/actions.ts","../src/helpers/EditorModal.html","../src/helpers/EditorColorPicker.html","../src/Editor.html"],"sourcesContent":["function noop() {}\n\nfunction assign(target) {\n\tvar k,\n\t\tsource,\n\t\ti = 1,\n\t\tlen = arguments.length;\n\tfor (; i < len; i++) {\n\t\tsource = arguments[i];\n\t\tfor (k in source) target[k] = source[k];\n\t}\n\n\treturn target;\n}\n\nfunction appendNode(node, target) {\n\ttarget.appendChild(node);\n}\n\nfunction insertNode(node, target, anchor) {\n\ttarget.insertBefore(node, anchor);\n}\n\nfunction detachNode(node) {\n\tnode.parentNode.removeChild(node);\n}\n\nfunction detachBetween(before, after) {\n\twhile (before.nextSibling && before.nextSibling !== after) {\n\t\tbefore.parentNode.removeChild(before.nextSibling);\n\t}\n}\n\nfunction detachBefore(after) {\n\twhile (after.previousSibling) {\n\t\tafter.parentNode.removeChild(after.previousSibling);\n\t}\n}\n\nfunction detachAfter(before) {\n\twhile (before.nextSibling) {\n\t\tbefore.parentNode.removeChild(before.nextSibling);\n\t}\n}\n\nfunction reinsertBetween(before, after, target) {\n\twhile (before.nextSibling && before.nextSibling !== after) {\n\t\ttarget.appendChild(before.parentNode.removeChild(before.nextSibling));\n\t}\n}\n\nfunction reinsertChildren(parent, target) {\n\twhile (parent.firstChild) target.appendChild(parent.firstChild);\n}\n\nfunction reinsertAfter(before, target) {\n\twhile (before.nextSibling) target.appendChild(before.nextSibling);\n}\n\nfunction reinsertBefore(after, target) {\n\tvar parent = after.parentNode;\n\twhile (parent.firstChild !== after) target.appendChild(parent.firstChild);\n}\n\nfunction destroyEach(iterations) {\n\tfor (var i = 0; i < iterations.length; i += 1) {\n\t\tif (iterations[i]) iterations[i].d();\n\t}\n}\n\nfunction createFragment() {\n\treturn document.createDocumentFragment();\n}\n\nfunction createElement(name) {\n\treturn document.createElement(name);\n}\n\nfunction createSvgElement(name) {\n\treturn document.createElementNS('http://www.w3.org/2000/svg', name);\n}\n\nfunction createText(data) {\n\treturn document.createTextNode(data);\n}\n\nfunction createComment() {\n\treturn document.createComment('');\n}\n\nfunction addListener(node, event, handler) {\n\tnode.addEventListener(event, handler, false);\n}\n\nfunction removeListener(node, event, handler) {\n\tnode.removeEventListener(event, handler, false);\n}\n\nfunction setAttribute(node, attribute, value) {\n\tnode.setAttribute(attribute, value);\n}\n\nfunction setXlinkAttribute(node, attribute, value) {\n\tnode.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\n\nfunction getBindingGroupValue(group) {\n\tvar value = [];\n\tfor (var i = 0; i < group.length; i += 1) {\n\t\tif (group[i].checked) value.push(group[i].__value);\n\t}\n\treturn value;\n}\n\nfunction toNumber(value) {\n\treturn value === '' ? undefined : +value;\n}\n\nfunction timeRangesToArray(ranges) {\n\tvar array = [];\n\tfor (var i = 0; i < ranges.length; i += 1) {\n\t\tarray.push({ start: ranges.start(i), end: ranges.end(i) });\n\t}\n\treturn array;\n}\n\nfunction children (element) {\n\treturn Array.from(element.childNodes);\n}\n\nfunction claimElement (nodes, name, attributes, svg) {\n\tfor (var i = 0; i < nodes.length; i += 1) {\n\t\tvar node = nodes[i];\n\t\tif (node.nodeName === name) {\n\t\t\tfor (var j = 0; j < node.attributes.length; j += 1) {\n\t\t\t\tvar attribute = node.attributes[j];\n\t\t\t\tif (!attributes[attribute.name]) node.removeAttribute(attribute.name);\n\t\t\t}\n\t\t\treturn nodes.splice(i, 1)[0]; // TODO strip unwanted attributes\n\t\t}\n\t}\n\n\treturn svg ? createSvgElement(name) : createElement(name);\n}\n\nfunction claimText (nodes, data) {\n\tfor (var i = 0; i < nodes.length; i += 1) {\n\t\tvar node = nodes[i];\n\t\tif (node.nodeType === 3) {\n\t\t\tnode.data = data;\n\t\t\treturn nodes.splice(i, 1)[0];\n\t\t}\n\t}\n\n\treturn createText(data);\n}\n\nfunction setInputType(input, type) {\n\ttry {\n\t\tinput.type = type;\n\t} catch (e) {}\n}\n\nfunction setStyle(node, key, value) {\n\tnode.style.setProperty(key, value);\n}\n\nfunction linear(t) {\n\treturn t;\n}\n\nfunction generateRule(\n\ta,\n\tb,\n\tdelta,\n\tduration,\n\tease,\n\tfn\n) {\n\tvar keyframes = '{\\n';\n\n\tfor (var p = 0; p <= 1; p += 16.666 / duration) {\n\t\tvar t = a + delta * ease(p);\n\t\tkeyframes += p * 100 + '%{' + fn(t) + '}\\n';\n\t}\n\n\treturn keyframes + '100% {' + fn(b) + '}\\n}';\n}\n\n// https://github.com/darkskyapp/string-hash/blob/master/index.js\nfunction hash(str) {\n\tvar hash = 5381;\n\tvar i = str.length;\n\n\twhile (i--) hash = ((hash << 5) - hash) ^ str.charCodeAt(i);\n\treturn hash >>> 0;\n}\n\nfunction wrapTransition(component, node, fn, params, intro, outgroup) {\n\tvar obj = fn(node, params);\n\tvar duration = obj.duration || 300;\n\tvar ease = obj.easing || linear;\n\tvar cssText;\n\n\t// TODO share <style> tag between all transitions?\n\tif (obj.css && !transitionManager.stylesheet) {\n\t\tvar style = createElement('style');\n\t\tdocument.head.appendChild(style);\n\t\ttransitionManager.stylesheet = style.sheet;\n\t}\n\n\tif (intro) {\n\t\tif (obj.css && obj.delay) {\n\t\t\tcssText = node.style.cssText;\n\t\t\tnode.style.cssText += obj.css(0);\n\t\t}\n\n\t\tif (obj.tick) obj.tick(0);\n\t}\n\n\treturn {\n\t\tt: intro ? 0 : 1,\n\t\trunning: false,\n\t\tprogram: null,\n\t\tpending: null,\n\t\trun: function(intro, callback) {\n\t\t\tvar program = {\n\t\t\t\tstart: window.performance.now() + (obj.delay || 0),\n\t\t\t\tintro: intro,\n\t\t\t\tcallback: callback\n\t\t\t};\n\n\t\t\tif (obj.delay) {\n\t\t\t\tthis.pending = program;\n\t\t\t} else {\n\t\t\t\tthis.start(program);\n\t\t\t}\n\n\t\t\tif (!this.running) {\n\t\t\t\tthis.running = true;\n\t\t\t\ttransitionManager.add(this);\n\t\t\t}\n\t\t},\n\t\tstart: function(program) {\n\t\t\tcomponent.fire(program.intro ? 'intro.start' : 'outro.start', { node: node });\n\n\t\t\tprogram.a = this.t;\n\t\t\tprogram.b = program.intro ? 1 : 0;\n\t\t\tprogram.delta = program.b - program.a;\n\t\t\tprogram.duration = duration * Math.abs(program.b - program.a);\n\t\t\tprogram.end = program.start + program.duration;\n\n\t\t\tif (obj.css) {\n\t\t\t\tif (obj.delay) node.style.cssText = cssText;\n\n\t\t\t\tprogram.rule = generateRule(\n\t\t\t\t\tprogram.a,\n\t\t\t\t\tprogram.b,\n\t\t\t\t\tprogram.delta,\n\t\t\t\t\tprogram.duration,\n\t\t\t\t\tease,\n\t\t\t\t\tobj.css\n\t\t\t\t);\n\n\t\t\t\ttransitionManager.addRule(program.rule, program.name = '__svelte_' + hash(program.rule));\n\n\t\t\t\tnode.style.animation = (node.style.animation || '')\n\t\t\t\t\t.split(', ')\n\t\t\t\t\t.filter(function(anim) {\n\t\t\t\t\t\t// when introing, discard old animations if there are any\n\t\t\t\t\t\treturn anim && (program.delta < 0 || !/__svelte/.test(anim));\n\t\t\t\t\t})\n\t\t\t\t\t.concat(program.name + ' ' + duration + 'ms linear 1 forwards')\n\t\t\t\t\t.join(', ');\n\t\t\t}\n\n\t\t\tthis.program = program;\n\t\t\tthis.pending = null;\n\t\t},\n\t\tupdate: function(now) {\n\t\t\tvar program = this.program;\n\t\t\tif (!program) return;\n\n\t\t\tvar p = now - program.start;\n\t\t\tthis.t = program.a + program.delta * ease(p / program.duration);\n\t\t\tif (obj.tick) obj.tick(this.t);\n\t\t},\n\t\tdone: function() {\n\t\t\tvar program = this.program;\n\t\t\tthis.t = program.b;\n\t\t\tif (obj.tick) obj.tick(this.t);\n\t\t\tif (obj.css) transitionManager.deleteRule(node, program.name);\n\t\t\tprogram.callback();\n\t\t\tprogram = null;\n\t\t\tthis.running = !!this.pending;\n\t\t},\n\t\tabort: function() {\n\t\t\tif (obj.tick) obj.tick(1);\n\t\t\tif (obj.css) transitionManager.deleteRule(node, this.program.name);\n\t\t\tthis.program = this.pending = null;\n\t\t\tthis.running = false;\n\t\t}\n\t};\n}\n\nvar transitionManager = {\n\trunning: false,\n\ttransitions: [],\n\tbound: null,\n\tstylesheet: null,\n\tactiveRules: {},\n\n\tadd: function(transition) {\n\t\tthis.transitions.push(transition);\n\n\t\tif (!this.running) {\n\t\t\tthis.running = true;\n\t\t\trequestAnimationFrame(this.bound || (this.bound = this.next.bind(this)));\n\t\t}\n\t},\n\n\taddRule: function(rule, name) {\n\t\tif (!this.activeRules[name]) {\n\t\t\tthis.activeRules[name] = true;\n\t\t\tthis.stylesheet.insertRule('@keyframes ' + name + ' ' + rule, this.stylesheet.cssRules.length);\n\t\t}\n\t},\n\n\tnext: function() {\n\t\tthis.running = false;\n\n\t\tvar now = window.performance.now();\n\t\tvar i = this.transitions.length;\n\n\t\twhile (i--) {\n\t\t\tvar transition = this.transitions[i];\n\n\t\t\tif (transition.program && now >= transition.program.end) {\n\t\t\t\ttransition.done();\n\t\t\t}\n\n\t\t\tif (transition.pending && now >= transition.pending.start) {\n\t\t\t\ttransition.start(transition.pending);\n\t\t\t}\n\n\t\t\tif (transition.running) {\n\t\t\t\ttransition.update(now);\n\t\t\t\tthis.running = true;\n\t\t\t} else if (!transition.pending) {\n\t\t\t\tthis.transitions.splice(i, 1);\n\t\t\t}\n\t\t}\n\n\t\tif (this.running) {\n\t\t\trequestAnimationFrame(this.bound);\n\t\t} else if (this.stylesheet) {\n\t\t\tvar i = this.stylesheet.cssRules.length;\n\t\t\twhile (i--) this.stylesheet.deleteRule(i);\n\t\t\tthis.activeRules = {};\n\t\t}\n\t},\n\n\tdeleteRule: function(node, name) {\n\t\tnode.style.animation = node.style.animation\n\t\t\t.split(', ')\n\t\t\t.filter(function(anim) {\n\t\t\t\treturn anim.slice(0, name.length) !== name;\n\t\t\t})\n\t\t\t.join(', ');\n\t}\n};\n\nfunction blankObject() {\n\treturn Object.create(null);\n}\n\nfunction destroy(detach) {\n\tthis.destroy = noop;\n\tthis.fire('destroy');\n\tthis.set = this.get = noop;\n\n\tif (detach !== false) this._fragment.u();\n\tthis._fragment.d();\n\tthis._fragment = this._state = null;\n}\n\nfunction destroyDev(detach) {\n\tdestroy.call(this, detach);\n\tthis.destroy = function() {\n\t\tconsole.warn('Component was already destroyed');\n\t};\n}\n\nfunction differs(a, b) {\n\treturn a !== b || ((a && typeof a === 'object') || typeof a === 'function');\n}\n\nfunction dispatchObservers(component, group, changed, newState, oldState) {\n\tfor (var key in group) {\n\t\tif (!changed[key]) continue;\n\n\t\tvar newValue = newState[key];\n\t\tvar oldValue = oldState[key];\n\n\t\tvar callbacks = group[key];\n\t\tif (!callbacks) continue;\n\n\t\tfor (var i = 0; i < callbacks.length; i += 1) {\n\t\t\tvar callback = callbacks[i];\n\t\t\tif (callback.__calling) continue;\n\n\t\t\tcallback.__calling = true;\n\t\t\tcallback.call(component, newValue, oldValue);\n\t\t\tcallback.__calling = false;\n\t\t}\n\t}\n}\n\nfunction fire(eventName, data) {\n\tvar handlers =\n\t\teventName in this._handlers && this._handlers[eventName].slice();\n\tif (!handlers) return;\n\n\tfor (var i = 0; i < handlers.length; i += 1) {\n\t\thandlers[i].call(this, data);\n\t}\n}\n\nfunction get(key) {\n\treturn key ? this._state[key] : this._state;\n}\n\nfunction init(component, options) {\n\tcomponent.options = options;\n\n\tcomponent._observers = { pre: blankObject(), post: blankObject() };\n\tcomponent._handlers = blankObject();\n\tcomponent._root = options._root || component;\n\tcomponent._bind = options._bind;\n}\n\nfunction observe(key, callback, options) {\n\tvar group = options && options.defer\n\t\t? this._observers.post\n\t\t: this._observers.pre;\n\n\t(group[key] || (group[key] = [])).push(callback);\n\n\tif (!options || options.init !== false) {\n\t\tcallback.__calling = true;\n\t\tcallback.call(this, this._state[key]);\n\t\tcallback.__calling = false;\n\t}\n\n\treturn {\n\t\tcancel: function() {\n\t\t\tvar index = group[key].indexOf(callback);\n\t\t\tif (~index) group[key].splice(index, 1);\n\t\t}\n\t};\n}\n\nfunction observeDev(key, callback, options) {\n\tvar c = (key = '' + key).search(/[^\\w]/);\n\tif (c > -1) {\n\t\tvar message =\n\t\t\t'The first argument to component.observe(...) must be the name of a top-level property';\n\t\tif (c > 0)\n\t\t\tmessage += \", i.e. '\" + key.slice(0, c) + \"' rather than '\" + key + \"'\";\n\n\t\tthrow new Error(message);\n\t}\n\n\treturn observe.call(this, key, callback, options);\n}\n\nfunction on(eventName, handler) {\n\tif (eventName === 'teardown') return this.on('destroy', handler);\n\n\tvar handlers = this._handlers[eventName] || (this._handlers[eventName] = []);\n\thandlers.push(handler);\n\n\treturn {\n\t\tcancel: function() {\n\t\t\tvar index = handlers.indexOf(handler);\n\t\t\tif (~index) handlers.splice(index, 1);\n\t\t}\n\t};\n}\n\nfunction onDev(eventName, handler) {\n\tif (eventName === 'teardown') {\n\t\tconsole.warn(\n\t\t\t\"Use component.on('destroy', ...) instead of component.on('teardown', ...) which has been deprecated and will be unsupported in Svelte 2\"\n\t\t);\n\t\treturn this.on('destroy', handler);\n\t}\n\n\treturn on.call(this, eventName, handler);\n}\n\nfunction set(newState) {\n\tthis._set(assign({}, newState));\n\tif (this._root._lock) return;\n\tthis._root._lock = true;\n\tcallAll(this._root._beforecreate);\n\tcallAll(this._root._oncreate);\n\tcallAll(this._root._aftercreate);\n\tthis._root._lock = false;\n}\n\nfunction _set(newState) {\n\tvar oldState = this._state,\n\t\tchanged = {},\n\t\tdirty = false;\n\n\tfor (var key in newState) {\n\t\tif (differs(newState[key], oldState[key])) changed[key] = dirty = true;\n\t}\n\tif (!dirty) return;\n\n\tthis._state = assign({}, oldState, newState);\n\tthis._recompute(changed, this._state);\n\tif (this._bind) this._bind(changed, this._state);\n\tdispatchObservers(this, this._observers.pre, changed, this._state, oldState);\n\tthis._fragment.p(changed, this._state);\n\tdispatchObservers(this, this._observers.post, changed, this._state, oldState);\n}\n\nfunction _setDev(newState) {\n\tif (typeof newState !== 'object') {\n\t\tthrow new Error(\n\t\t\tthis._debugName + ' .set was called without an object of data key-values to update.'\n\t\t);\n\t}\n\n\tthis._checkReadOnly(newState);\n\t_set.call(this, newState);\n}\n\nfunction callAll(fns) {\n\twhile (fns && fns.length) fns.pop()();\n}\n\nfunction _mount(target, anchor) {\n\tthis._fragment.m(target, anchor);\n}\n\nfunction _unmount() {\n\tthis._fragment.u();\n}\n\nvar proto = {\n\tdestroy: destroy,\n\tget: get,\n\tfire: fire,\n\tobserve: observe,\n\ton: on,\n\tset: set,\n\tteardown: destroy,\n\t_recompute: noop,\n\t_set: _set,\n\t_mount: _mount,\n\t_unmount: _unmount\n};\n\nvar protoDev = {\n\tdestroy: destroyDev,\n\tget: get,\n\tfire: fire,\n\tobserve: observeDev,\n\ton: onDev,\n\tset: set,\n\tteardown: destroyDev,\n\t_recompute: noop,\n\t_set: _setDev,\n\t_mount: _mount,\n\t_unmount: _unmount\n};\n\nexport { blankObject, destroy, destroyDev, differs, dispatchObservers, fire, get, init, observe, observeDev, on, onDev, set, _set, _setDev, callAll, _mount, _unmount, proto, protoDev, appendNode, insertNode, detachNode, detachBetween, detachBefore, detachAfter, reinsertBetween, reinsertChildren, reinsertAfter, reinsertBefore, destroyEach, createFragment, createElement, createSvgElement, createText, createComment, addListener, removeListener, setAttribute, setXlinkAttribute, getBindingGroupValue, toNumber, timeRangesToArray, children, claimElement, claimText, setInputType, setStyle, linear, generateRule, hash, wrapTransition, transitionManager, noop, assign };\n","let t: any = {};\n\nexport const exec = (command: string, value = null) => {\n  document.execCommand(command, false, value)\n}\n\nexport const getTagsRecursive = (element: HTMLElement | any, tags: string[]) => {\n  tags = tags || (element && element.tagName ? [element.tagName] : []);\n\n  if (element && element.parentNode) {\n    element = element.parentNode;\n  } else {\n    return tags;\n  }\n\n  const tag = element.tagName;\n  if (element.style && element.getAttribute) {\n    [element.style.textAlign || element.getAttribute('align'), element.style.color || tag === 'FONT' && 'forecolor', element.style.backgroundColor && 'backcolor']\n      .filter((item: string) => item)\n      .forEach((item: string) => tags.push(item));\n  }\n\n  if (tag === 'DIV') {\n    return tags;\n  }\n\n  tags.push(tag);\n\n  return getTagsRecursive(element, tags).filter((_tag) => _tag != null);\n}\n\nexport const saveRange = (editor: HTMLElement) => {\n  const documentSelection = document.getSelection();\n\n  t.range = null;\n\n  if (documentSelection.rangeCount) {\n      let savedRange = t.range = documentSelection.getRangeAt(0);\n      let range = document.createRange();\n      let rangeStart;\n      range.selectNodeContents(editor);\n      range.setEnd(savedRange.startContainer, savedRange.startOffset);\n      rangeStart = (range + '').length;\n      t.metaRange = {\n          start: rangeStart,\n          end: rangeStart + (savedRange + '').length\n      };\n  }\n}\nexport const restoreRange = (editor: HTMLElement) => {\n  let metaRange = t.metaRange;\n  let savedRange = t.range;\n  let documentSelection = document.getSelection();\n  let range;\n\n  if (!savedRange) {\n      return;\n  }\n\n  if (metaRange && metaRange.start !== metaRange.end) { // Algorithm from http://jsfiddle.net/WeWy7/3/\n      let charIndex = 0,\n          nodeStack = [editor],\n          node,\n          foundStart = false,\n          stop = false;\n\n      range = document.createRange();\n\n      while (!stop && (node = nodeStack.pop())) {\n          if (node.nodeType === 3) {\n              let nextCharIndex = charIndex + node.length;\n              if (!foundStart && metaRange.start >= charIndex && metaRange.start <= nextCharIndex) {\n                  range.setStart(node, metaRange.start - charIndex);\n                  foundStart = true;\n              }\n              if (foundStart && metaRange.end >= charIndex && metaRange.end <= nextCharIndex) {\n                  range.setEnd(node, metaRange.end - charIndex);\n                  stop = true;\n              }\n              charIndex = nextCharIndex;\n          } else {\n              let cn = node.childNodes;\n              let i = cn.length;\n\n              while (i > 0) {\n                  i -= 1;\n                  nodeStack.push(cn[i]);\n              }\n          }\n      }\n  }\n\n  documentSelection.removeAllRanges();\n  documentSelection.addRange(range || savedRange);\n}\n\nexport const cleanHtml = (input: string) => {\n  const html = input.match(/<!--StartFragment-->(.*?)<!--EndFragment-->/);\n  let output = html && html[1] || input;\n  output = output\n    .replace(/\\r?\\n|\\r/g, ' ')\n    .replace(/<!--(.*?)-->/g, '')\n    .replace(new RegExp('<(/)*(meta|link|span|\\\\?xml:|st1:|o:|font|w:sdt)(.*?)>', 'gi'), '')\n    .replace(/<!\\[if !supportLists\\]>(.*?)<!\\[endif\\]>/gi, '')\n    .replace(/style=\"[^\"]*\"/gi, '')\n    .replace(/style='[^']*'/gi, '')\n    .replace(/&nbsp;/gi, ' ')\n    .replace(/>(\\s+)</g, '><')\n    .replace(/class=\"[^\"]*\"/gi, '')\n    .replace(/class='[^']*'/gi, '')\n    .replace(/<[^/].*?>/g, i => i.split(/[ >]/g)[0] + '>')\n    .trim()\n\n    output = removeBadTags(output);\n    return output;\n}\n\nexport const unwrap = (wrapper: Node) => {\n\tconst docFrag = document.createDocumentFragment();\n\twhile (wrapper.firstChild) {\n\t\tconst child = wrapper.removeChild(wrapper.firstChild);\n\t\tdocFrag.appendChild(child);\n\t}\n\n\t// replace wrapper with document fragment\n\twrapper.parentNode.replaceChild(docFrag, wrapper);\n}\n\nexport const removeBlockTagsRecursive = (elements: HTMLCollection, tagsToRemove: string[]) => {\n  Array.from(elements).forEach((item: HTMLElement) => {\n    if (tagsToRemove.some((tag: string) => tag === item.tagName.toLowerCase())) {\n      if (item.children.length) {\n        removeBlockTagsRecursive(item.children, tagsToRemove);\n      }\n      unwrap(item);\n    }\n  });\n}\n\nexport const getActionBtns = (actions) => {\n  return Object.keys(actions).map((action) => actions[action]);\n}\n\nexport const getNewActionObj = (actions: any, userActions = []) => {\n    if (userActions && userActions.length) {\n        const newActions = {};\n        userActions.forEach((action) => {\n            if (typeof action === 'string') {\n                newActions[action] = Object.assign({}, actions[action]);\n            } else if (actions[action.name]) {\n                newActions[action.name] = Object.assign(actions[action.name], action);\n            } else {\n                newActions[action.name] = Object.assign({}, action);\n            }\n        });\n    \n        return newActions;\n    } else {\n        return actions;\n    }\n}\n\nexport const removeBadTags = (html: string) => {\n    ['style', 'script', 'applet', 'embed', 'noframes', 'noscript'].forEach((badTag: string) => {\n        html = html.replace(new RegExp(`<${badTag}.*?${badTag}(.*?)>`, 'gi'), '')\n    });\n\n    return html;\n}\n\nexport const isEditorClick = (target: HTMLElement, editorWrapper: HTMLElement) => {\n    if (target === editorWrapper) {\n        return true;\n    }\n    if (target.parentElement) {\n        return isEditorClick(target.parentElement, editorWrapper);\n    }\n    return false;\n}","import {exec, removeBlockTagsRecursive, getActionBtns, saveRange, restoreRange, unwrap} from './util';\n\nconst linkSvg = '<svg viewBox=\"0 0 72 72\" width=\"17px\" height=\"100%\"><path d=\"M31.1 48.9l-6.7 6.7c-.8.8-1.6.9-2.1.9s-1.4-.1-2.1-.9L15 50.4c-1.1-1.1-1.1-3.1 0-4.2l6.1-6.1.2-.2 6.5-6.5c-1.2-.6-2.5-.9-3.8-.9-2.3 0-4.6.9-6.3 2.6L11 41.8c-3.5 3.5-3.5 9.2 0 12.7l5.2 5.2c1.7 1.7 4 2.6 6.3 2.6s4.6-.9 6.3-2.6l6.7-6.7c2.5-2.6 3.1-6.7 1.5-10l-5.9 5.9zM38.7 22.5l6.7-6.7c.8-.8 1.6-.9 2.1-.9s1.4.1 2.1.9l5.2 5.2c1.1 1.1 1.1 3.1 0 4.2l-6.1 6.1-.2.2L42 38c1.2.6 2.5.9 3.8.9 2.3 0 4.6-.9 6.3-2.6l6.7-6.7c3.5-3.5 3.5-9.2 0-12.7l-5.2-5.2c-1.7-1.7-4-2.6-6.3-2.6s-4.6.9-6.3 2.6l-6.7 6.7c-2.7 2.7-3.3 6.9-1.7 10.2l6.1-6.1c0 .1 0 .1 0 0z\"></path><path d=\"M44.2 30.5c.2-.2.4-.6.4-.9 0-.3-.1-.6-.4-.9l-2.3-2.3c-.3-.2-.6-.4-.9-.4-.3 0-.6.1-.9.4L25.9 40.6c-.2.2-.4.6-.4.9 0 .3.1.6.4.9l2.3 2.3c.2.2.6.4.9.4.3 0 .6-.1.9-.4l14.2-14.2zM49.9 55.4h-8.5v-5h8.5v-8.9h5.2v8.9h8.5v5h-8.5v8.9h-5.2v-8.9z\"></path></svg>';\nconst unlinkSvg = '<svg viewBox=\"0 0 72 72\" width=\"17px\" height=\"100%\"><path d=\"M30.9 49.1l-6.7 6.7c-.8.8-1.6.9-2.1.9s-1.4-.1-2.1-.9l-5.2-5.2c-1.1-1.1-1.1-3.1 0-4.2l6.1-6.1.2-.2 6.5-6.5c-1.2-.6-2.5-.9-3.8-.9-2.3 0-4.6.9-6.3 2.6L10.8 42c-3.5 3.5-3.5 9.2 0 12.7l5.2 5.2c1.7 1.7 4 2.6 6.3 2.6s4.6-.9 6.3-2.6l6.7-6.7C38 50.5 38.6 46.3 37 43l-6.1 6.1zM38.5 22.7l6.7-6.7c.8-.8 1.6-.9 2.1-.9s1.4.1 2.1.9l5.2 5.2c1.1 1.1 1.1 3.1 0 4.2l-6.1 6.1-.2.2-6.5 6.5c1.2.6 2.5.9 3.8.9 2.3 0 4.6-.9 6.3-2.6l6.7-6.7c3.5-3.5 3.5-9.2 0-12.7l-5.2-5.2c-1.7-1.7-4-2.6-6.3-2.6s-4.6.9-6.3 2.6l-6.7 6.7c-2.7 2.7-3.3 6.9-1.7 10.2l6.1-6.1z\"></path><path d=\"M44.1 30.7c.2-.2.4-.6.4-.9 0-.3-.1-.6-.4-.9l-2.3-2.3c-.2-.2-.6-.4-.9-.4-.3 0-.6.1-.9.4L25.8 40.8c-.2.2-.4.6-.4.9 0 .3.1.6.4.9l2.3 2.3c.2.2.6.4.9.4.3 0 .6-.1.9-.4l14.2-14.2zM41.3 55.8v-5h22.2v5H41.3z\"></path></svg>';\n\nexport default {\n  viewHtml: {\n    icon: '<svg viewBox=\"0 0 72 72\" width=\"17px\" height=\"100%\"><path fill=\"none\" stroke=\"currentColor\" stroke-width=\"8\" stroke-miterlimit=\"10\" d=\"M26.9 17.9L9 36.2 26.9 54M45 54l17.9-18.3L45 17.9\"></path></svg>',\n    title: 'View HTML',\n    result: function() {\n      const _this = this;\n      const actionObj = this.get('actionObj');\n      this.helper.showEditor = !this.helper.showEditor;\n      this.refs.editor.style.display = this.helper.showEditor ? 'block' : 'none';\n      this.refs.raw.style.display = this.helper.showEditor ? 'none' : 'block';\n      if (this.helper.showEditor) {\n        this.refs.editor.innerHTML = this.refs.raw.value;\n      } else {\n        this.refs.raw.value = this.refs.editor.innerHTML;\n      }\n      setTimeout(() =>{\n        Object.keys(actionObj).forEach((action: string) => actionObj[action].disabled = !_this.helper.showEditor);\n        actionObj.viewHtml.disabled = false;\n        actionObj.viewHtml.active = !_this.helper.showEditor;\n        _this.set({ actionBtns: getActionBtns(actionObj),  actionObj });\n      })\n    }\n  },\n  undo: {\n    icon: '<svg viewBox=\"0 0 72 72\" width=\"17px\" height=\"100%\"><path d=\"M61.2 51.2c0-5.1-2.1-9.7-5.4-13.1-3.3-3.3-8-5.4-13.1-5.4H26.1v-12L10.8 36l15.3 15.3V39.1h16.7c3.3 0 6.4 1.3 8.5 3.5 2.2 2.2 3.5 5.2 3.5 8.5h6.4z\"></path></svg>',\n    title: 'Undo',\n    result: () => exec('undo')\n  },\n  redo: {\n    icon: '<svg viewBox=\"0 0 72 72\" width=\"17px\" height=\"100%\"><path d=\"M10.8 51.2c0-5.1 2.1-9.7 5.4-13.1 3.3-3.3 8-5.4 13.1-5.4H46v-12L61.3 36 45.9 51.3V39.1H29.3c-3.3 0-6.4 1.3-8.5 3.5-2.2 2.2-3.5 5.2-3.5 8.5h-6.5z\"></path></svg>',\n    title: 'Redo',\n    result: () => exec('redo')\n  },\n  b: {\n    icon: '<b>B</b>',\n    title: 'Bold',\n    result: () => exec('bold')\n  },\n  i: {\n    icon: '<i>I</i>',\n    title: 'Italic',\n    result: () => exec('italic')\n  },\n  u: {\n    icon: '<u>U</u>',\n    title: 'Underline',\n    result: () => exec('underline')\n  },\n  strike: {\n    icon: '<strike>S</strike>',\n    title: 'Strike-through',\n    result: () => exec('strikeThrough')\n  },\n  sup: {\n    icon: 'A<sup>2</sup>',\n    title: 'Superscript',\n    result: () => exec('superscript')\n  },\n  sub: {\n    icon: 'A<sub>2</sub>',\n    title: 'Subscript',\n    result: () => exec('subscript')\n  },\n  h1: {\n    icon: '<b>H<sub>1</sub></b>',\n    title: 'Heading 1',\n    result: () => exec('formatBlock', '<H1>')\n  },\n  h2: {\n    icon: '<b>H<sub>2</sub></b>',\n    title: 'Heading 2',\n    result: () => exec('formatBlock', '<H2>')\n  },\n  p: {\n    icon: '&#182;',\n    title: 'Paragraph',\n    result: () => exec('formatBlock', '<P>')\n  },\n  blockquote: {\n    icon: '&#8220; &#8221;',\n    title: 'Quote',\n    result: () => exec('formatBlock', '<BLOCKQUOTE>')\n  },\n  ol: {\n    icon: '<svg viewBox=\"0 0 72 72\" width=\"17px\" height=\"100%\"><path d=\"M27 14h36v8H27zM27 50h36v8H27zM27 32h36v8H27zM11.8 15.8V22h1.8v-7.8h-1.5l-2.1 1 .3 1.3zM12.1 38.5l.7-.6c1.1-1 2.1-2.1 2.1-3.4 0-1.4-1-2.4-2.7-2.4-1.1 0-2 .4-2.6.8l.5 1.3c.4-.3 1-.6 1.7-.6.9 0 1.3.5 1.3 1.1 0 .9-.9 1.8-2.6 3.3l-1 .9V40H15v-1.5h-2.9zM13.3 53.9c1-.4 1.4-1 1.4-1.8 0-1.1-.9-1.9-2.6-1.9-1 0-1.9.3-2.4.6l.4 1.3c.3-.2 1-.5 1.6-.5.8 0 1.2.3 1.2.8 0 .7-.8.9-1.4.9h-.7v1.3h.7c.8 0 1.6.3 1.6 1.1 0 .6-.5 1-1.4 1-.7 0-1.5-.3-1.8-.5l-.4 1.4c.5.3 1.3.6 2.3.6 2 0 3.2-1 3.2-2.4 0-1.1-.8-1.8-1.7-1.9z\"></path></svg>',\n    title: 'Ordered List',\n    result: () => exec('insertOrderedList')\n  },\n  ul: {\n    icon: '<svg viewBox=\"0 0 72 72\" width=\"17px\" height=\"100%\"><path d=\"M27 14h36v8H27zM27 50h36v8H27zM9 50h9v8H9zM9 32h9v8H9zM9 14h9v8H9zM27 32h36v8H27z\"></path></svg>',\n    title: 'Unordered List',\n    result: () => exec('insertUnorderedList')\n  },\n  hr: {\n    icon: '&#8213;',\n    title: 'Horizontal Line',\n    result: () => exec('insertHorizontalRule')\n  },\n  left: {\n    icon: '<svg viewBox=\"0 0 72 72\" width=\"17px\" height=\"100%\"><path d=\"M9 14h54v8H9zM9 50h54v8H9zM9 32h36v8H9z\"></path></svg>',\n    title: 'Justify left',\n    result: () => exec('justifyLeft')\n  },\n  right: {\n    icon: '<svg viewBox=\"0 0 72 72\" width=\"17px\" height=\"100%\"><path d=\"M9 14h54v8H9zM9 50h54v8H9zM27 32h36v8H27z\"></path></svg>',\n    title: 'Justify right',\n    result: () => exec('justifyRight')\n  },\n  center: {\n    icon: '<svg viewBox=\"0 0 72 72\" width=\"17px\" height=\"100%\"><path d=\"M9 14h54v8H9zM9 50h54v8H9zM18 32h36v8H18z\"></path></svg>',\n    title: 'Justify center',\n    result: () => exec('justifyCenter')\n  },\n  justify: {\n    icon: '<svg viewBox=\"0 0 72 72\" width=\"17px\" height=\"100%\"><path d=\"M9 14h54v8H9zM9 50h54v8H9zM9 32h54v8H9z\"></path></svg>',\n    title: 'Justify full',\n    result: () => exec('justifyFull')\n  },\n  a: {\n    icon: linkSvg,\n    title: 'Insert link',\n    result: function() {\n      const actionObj = this.get('actionObj');\n      if (actionObj.a.active) {\n        const selection = window.getSelection();\n        const range = document.createRange();\n        range.selectNodeContents(document.getSelection().focusNode);\n        selection.removeAllRanges();\n        selection.addRange(range);\n        exec('unlink');\n        actionObj.a.title = 'Insert link';\n        actionObj.a.icon = linkSvg;\n        this.set({actionBtns: getActionBtns(actionObj), actionObj});\n      } else {\n        saveRange(this.refs.editor);\n        this.modal.set({show: true, event: 'linkUrl', title: 'Insert link', label: 'Url'});\n        if (!this.helper.link) {\n          this.helper.link = true;\n          this.modal.on('linkUrl', (url) => {\n            restoreRange(this.refs.editor);\n            exec('createLink', url);\n            actionObj.a.title = 'Unlink';\n            actionObj.a.icon = unlinkSvg;\n            \n            this.set({actionBtns: getActionBtns(actionObj), actionObj});\n          });\n        }\n      }\n\n    }\n  },\n  image: {\n    icon: '<svg viewBox=\"0 0 72 72\" width=\"17px\" height=\"100%\"><path d=\"M64 17v38H8V17h56m8-8H0v54h72V9z\"></path><path d=\"M17.5 22C15 22 13 24 13 26.5s2 4.5 4.5 4.5 4.5-2 4.5-4.5-2-4.5-4.5-4.5zM16 50h27L29.5 32zM36 36.2l8.9-8.5L60.2 50H45.9S35.6 35.9 36 36.2z\"></path></svg>',\n    title: 'Image',\n    result: function() {\n      saveRange(this.refs.editor);\n      this.modal.set({show: true, event: 'imageUrl', title: 'Insert image', label: 'Url'});\n      if (!this.helper.image) {\n        this.helper.image = true;\n        this.modal.on('imageUrl', (url: string) => {\n          restoreRange(this.refs.editor);\n          exec('insertImage', url);\n        });\n      }\n    }\n  },\n  forecolor: {\n    icon: '<svg viewBox=\"0 0 72 72\" width=\"17px\" height=\"100%\"><path d=\"M32 15h7.8L56 57.1h-7.9l-4-11.1H27.4l-4 11.1h-7.6L32 15zm-2.5 25.4h12.9L36 22.3h-.2l-6.3 18.1z\"></path></svg>',\n    title: 'Text color',\n    colorPicker: true,\n    result: function() {\n      showColorPicker.call(this, 'foreColor');\n    }\n  },\n  backcolor: {\n    icon: '<svg viewBox=\"0 0 72 72\" width=\"17px\" height=\"100%\"><path d=\"M36.5 22.3l-6.3 18.1H43l-6.3-18.1z\"></path><path d=\"M9 8.9v54.2h54.1V8.9H9zm39.9 48.2L45 46H28.2l-3.9 11.1h-7.6L32.8 15h7.8l16.2 42.1h-7.9z\"></path></svg>',\n    title: 'Background color',\n    colorPicker: true,\n    result: function() {\n      showColorPicker.call(this, 'backColor');\n    }\n  },\n  removeFormat: {\n    icon: '<svg viewBox=\"0 0 72 72\" width=\"17px\" height=\"100%\"><path d=\"M58.2 54.6L52 48.5l3.6-3.6 6.1 6.1 6.4-6.4 3.8 3.8-6.4 6.4 6.1 6.1-3.6 3.6-6.1-6.1-6.4 6.4-3.7-3.8 6.4-6.4zM21.7 52.1H50V57H21.7zM18.8 15.2h34.1v6.4H39.5v24.2h-7.4V21.5H18.8v-6.3z\"></path></svg>',\n    title: 'Remove format',\n    result: function() {\n      const selection = window.getSelection();\n      if (!selection.toString().length) {\n        removeBlockTagsRecursive(this.refs.editor.children, this.get('removeFormatTags'));\n        const range = document.createRange();\n        range.selectNodeContents(this.refs.editor);\n        selection.removeAllRanges();\n        selection.addRange(range);\n      }\n      exec('removeFormat');\n      selection.removeAllRanges();\n    }\n  }\n}\n\nconst showColorPicker = function(cmd) {\n  saveRange(this.refs.editor);\n  this.colorPicker.set({show: true, event: cmd});\n  if (!this.helper[cmd]) {\n    this.helper[cmd] = true;\n    this.colorPicker.on(cmd, (item) => {\n      if (item.modal) {\n        this.modal.set({show: true, event: 'colorHref', title: 'Text color', label: cmd === 'foreColor' ? 'Text color' : 'Background color'});\n        const command = cmd;\n        if (!this.helper[`${command}Modal`]) {\n          this.helper[`${command}Modal`] = true;\n          this.modal.on('colorHref', (color) => {\n            restoreRange(this.refs.editor);\n            exec(command, color);\n          });\n        }\n      } else {\n        restoreRange(this.refs.editor);\n        exec(cmd, item.color);\n      }\n    });\n  }\n}","<div style=\"display: {{show ? 'block' : 'none'}}\">\n    <div class=\"cl-editor-overlay\" on:click=\"cancel()\"></div>\n    <div class=\"cl-editor-modal\">\n        <div class=\"modal-box\">\n            <span class=\"modal-title\">{{title}}</span>\n            <form on:submit=\"confirm(event)\">\n                <label class=\"modal-label {{error ? 'input-error' : ''}}\">\n                    <input ref:text on:keyup=\"hideError()\" type=\"text\" name=\"text\" bind:value=\"text\">\n                    <span class=\"input-info\">\n                        <span>{{label}}</span>\n                        {{#if error}}\n                        <span class=\"msg-error\">Required</span>\n                        {{/if}}\n                    </span>\n                </label>\n                <button class=\"modal-button modal-submit\" type=\"submit\">Confirm</button>\n                <button class=\"modal-button modal-reset\" type=\"reset\" on:click=\"cancel()\">Cancel</button>\n            </form>\n        </div>\n    </div>\n</div>\n\n<script>\n    export default {\n        data() {\n            return {\n                show: false,\n                text: '',\n                event: '',\n                title: '',\n                label: '',\n                error: false\n            }\n        },\n        oncreate() {\n            this.observe('show', show => {\n                if (show) {\n                    setTimeout(() => {\n                        this.refs.text.focus();\n                    });\n                }\n            }, {init: false});\n        },\n        methods: {\n            confirm: function(event) {\n                event.preventDefault();\n                const text = this.get('text');\n                if (text) {\n                    this.fire(this.get('event'), text);\n                    this.cancel();\n                } else {\n                    this.set({error: true});\n                    this.refs.text.focus();\n                }\n            },\n            cancel: function() {\n                this.set({show: false, text: '', error: false});\n            },\n            hideError: function() {\n                this.set({error: false});\n            }\n        }\n    }\n</script>\n\n<style>\n    .cl-editor-modal {\n        position: absolute;\n        top: 37px;\n        left: 50%;\n        -webkit-transform: translateX(-50%);\n        transform: translateX(-50%);\n        max-width: 520px;\n        width: 100%;\n        height: 140px;\n        backface-visibility: hidden;\n        z-index: 11;\n    }\n\n    .cl-editor-overlay {\n        position: absolute;\n        background-color: rgba(255,255,255,.5);\n        height: 100%;\n        width: 100%;\n        left: 0;\n        top: 0;\n        z-index: 10;\n    }\n\n    .modal-box {\n        position: absolute;\n        top: 0;\n        left: 50%;\n        -webkit-transform: translateX(-50%);\n        transform: translateX(-50%);\n        max-width: 500px;\n        width: calc(100% - 20px);\n        padding-bottom: 36px;\n        z-index: 1;\n        background-color: #FFF;\n        text-align: center;\n        font-size: 14px;\n        box-shadow: rgba(0,0,0,.2) 0 2px 3px;\n        -webkit-backface-visibility: hidden;\n        backface-visibility: hidden;\n    }\n\n    .modal-title {\n        font-size: 24px;\n        font-weight: 700;\n        margin: 0 0 20px;\n        padding: 2px 0 4px;\n        display: block;\n        border-bottom: 1px solid #EEE;\n        color: #333;\n        background: #fbfcfc;\n    }\n\n    .modal-label {\n        display: block;\n        position: relative;\n        margin: 15px 12px;\n        height: 29px;\n        line-height: 29px;\n        overflow: hidden;\n    }\n\n    .modal-label input {\n        position: absolute;\n        top: 0;\n        right: 0;\n        height: 27px;\n        line-height: 25px;\n        border: 1px solid #DEDEDE;\n        background: #fff;\n        font-size: 14px;\n        max-width: 330px;\n        width: 70%;\n        padding: 0 7px;\n        transition: all 150ms;\n    }\n\n    .modal-label input:focus {\n        outline: none;\n    }\n\n    .input-error input {\n        border: 1px solid #e74c3c;\n    }\n\n    .input-info {\n        display: block;\n        text-align: left;\n        height: 25px;\n        line-height: 25px;\n        transition: all 150ms;\n    }\n\n    .input-info span {\n        display: block;\n        color: #69878f;\n        background-color: #fbfcfc;\n        border: 1px solid #DEDEDE;\n        padding: 0 7px;\n        width: 150px;\n    }\n\n    .input-error .input-info {\n        margin-top: -27px;\n    }\n\n    .input-error .msg-error {\n        color: #e74c3c;\n    }\n\n    .modal-button {\n        position: absolute;\n        bottom: 10px;\n        right: 0;\n        text-decoration: none;\n        color: #FFF;\n        display: block;\n        width: 100px;\n        height: 35px;\n        line-height: 33px;\n        margin: 0 10px;\n        background-color: #333;\n        border: none;\n        cursor: pointer;\n        font-family: \"Lato\",Helvetica,Verdana,sans-serif;\n        font-size: 16px;\n        transition: all 150ms;\n    }\n\n    .modal-submit {\n        right: 110px;\n        background: #2bc06a;\n    }\n\n    .modal-reset {\n        color: #555;\n        background: #e6e6e6;\n    }\n</style>","<div style=\"display: {{show ? 'block' : 'none'}}\">\n    <div class=\"color-picker-overlay\" on:click=\"close()\"></div>\n    <div class=\"color-picker-wrapper\">\n        {{#each btns as btn}}\n        <button type=\"button\" class=\"color-picker-btn\" style=\"background-color:{{btn.color}};\" on:click=\"selectColor(btn)\">{{btn.text || ''}}</button>\n        {{/each}}\n    </div>\n</div>\n\n<script>\n    const colors = ['ffffff', '000000', 'eeece1', '1f497d', '4f81bd', 'c0504d', '9bbb59', '8064a2', '4bacc6', 'f79646', 'ffff00', 'f2f2f2', '7f7f7f', 'ddd9c3', 'c6d9f0', 'dbe5f1', 'f2dcdb', 'ebf1dd', 'e5e0ec', 'dbeef3', 'fdeada', 'fff2ca', 'd8d8d8', '595959', 'c4bd97', '8db3e2', 'b8cce4', 'e5b9b7', 'd7e3bc', 'ccc1d9', 'b7dde8', 'fbd5b5', 'ffe694', 'bfbfbf', '3f3f3f', '938953', '548dd4', '95b3d7', 'd99694', 'c3d69b', 'b2a2c7', 'b7dde8', 'fac08f', 'f2c314', 'a5a5a5', '262626', '494429', '17365d', '366092', '953734', '76923c', '5f497a', '92cddc', 'e36c09', 'c09100', '7f7f7f', '0c0c0c', '1d1b10', '0f243e', '244061', '632423', '4f6128', '3f3151', '31859b', '974806', '7f6000']\n\n    const getBtns = () => {\n        const btns = colors.map((color) => ({ color: `#${color}` }));\n        btns.push({ text: '#', modal: true });\n        return btns;\n    }\n    export default {\n        data() {\n            return {\n                show: false,\n                btns: [],\n                event: ''\n            }\n        },\n        oncreate() {\n            this.set({btns: getBtns()});\n        },\n        methods: {\n            close: function() {\n                this.set({show: false});\n            },\n            selectColor: function(btn) {\n                this.fire(this.get('event'), btn);\n                this.close();\n            }\n        }\n    }\n</script>\n\n<style>\n    .color-picker-wrapper {\n        border: 1px solid #ecf0f1;\n        border-top: none;\n        background: #FFF;\n        box-shadow: rgba(0,0,0,.1) 0 2px 3px;\n        width: 290px;\n        left: 50%;\n        -webkit-transform: translateX(-50%);\n        transform: translateX(-50%);\n        padding: 0;\n        position: absolute;\n        top: 37px;\n        z-index: 11;\n    }\n\n    .color-picker-overlay {\n        position: absolute;\n        background-color: rgba(255,255,255,.5);\n        height: 100%;\n        width: 100%;\n        left: 0;\n        top: 0;\n        z-index: 10;\n    }\n\n    .color-picker-btn {\n        display: block;\n        position: relative;\n        float: left;\n        height: 20px;\n        width: 20px;\n        border: 1px solid #333;\n        padding: 0;\n        margin: 2px;\n        line-height: 35px;\n        text-decoration: none;\n        background: #FFF;\n        color: #333!important;\n        cursor: pointer;\n        text-align: left;\n        font-size: 15px;\n        transition: all 150ms;\n        line-height: 20px;\n        padding: 0px 5px;\n    }\n\n    .color-picker-btn:hover::after {\n        content: \" \";\n        display: block;\n        position: absolute;\n        top: -5px;\n        left: -5px;\n        height: 27px;\n        width: 27px;\n        background: inherit;\n        border: 1px solid #FFF;\n        box-shadow: #000 0 0 2px;\n        z-index: 10;\n    }\n</style>","<:Window on:click=\"_documentClick(event)\" />\n<div class=\"cl\" ref:editorWrapper>\n  <div class=\"cl-actionbar\">\n    {{#each actionBtns as action}}\n      <button \n        class=\"cl-button {{action.active ? 'active' : ''}}\" \n        title=\"{{action.title}}\" \n        on:click=\"_btnClicked(action)\" \n        disabled=\"{{action.disabled}}\">\n        {{{action.icon}}}\n      </button>\n    {{/each}}\n  </div>\n  <div ref:editor \n    class=\"cl-content\"\n    style=\"height: {{height}}\"\n    contenteditable=\"true\"\n    on:input=\"_onChange(event.target.innerHTML)\" \n    on:mouseup=\"_handleButtonStatus()\" \n    on:keyup=\"_handleButtonStatus()\"\n    on:paste=\"_onPaste(event)\">\n  </div>\n  \n  <textarea ref:raw class=\"cl-textarea\" style=\"max-height: {{height}}; min-height: {{height}}\"></textarea>\n  <div ref:modal></div>\n  <div ref:colorPicker></div>\n</div>\n\n<script>\n  import {\n    getTagsRecursive,\n    saveRange,\n    restoreRange,\n    exec,\n    cleanHtml,\n    getActionBtns,\n    getNewActionObj,\n    removeBadTags,\n    isEditorClick\n  } from './helpers/util';\n  import actions from './helpers/actions';\n  import EditorModal from './helpers/EditorModal.html';\n  import EditorColorPicker from './helpers/EditorColorPicker.html';\n\n  export default {\n    data() {\n      return {\n        actionBtns: [],\n        height: '300px',\n        html: '',\n        removeFormatTags: ['h1', 'h2', 'blockquote']\n      }\n    },\n    oncreate() {\n      const data = this.options.data || {};\n      const actionObj = getNewActionObj(actions, data.actions);\n      this.set({ actionBtns: getActionBtns(actionObj), actionObj });\n      this.setHtml(data.html);\n      this.modal = new EditorModal({ target: this.refs.modal });\n      this.colorPicker = new EditorColorPicker({ target: this.refs.colorPicker });\n      this.helper = {\n        foreColor: false,\n        backColor: false,\n        foreColorModal: false,\n        backColorModal: false,\n        image: false,\n        link: false,\n        showEditor: true,\n        blurActive: false\n      }\n    },\n    methods: {\n      _btnClicked: function(action) {\n        this.refs.editor.focus();\n        saveRange(this.refs.editor);\n        restoreRange(this.refs.editor);\n        action.result.call(this);\n        this._handleButtonStatus();\n      },\n      _handleButtonStatus: function(clearBtns) {\n        const tags = clearBtns ? [] : getTagsRecursive(document.getSelection().focusNode);\n        const actionObj = this.get('actionObj');\n        Object.keys(actionObj).forEach((action) => actionObj[action].active = false);\n        tags.forEach((tag) => (actionObj[tag.toLowerCase()] || {}).active = true);\n        this.set({ actionBtns: getActionBtns(actionObj), actionObj });\n      },\n      _onPaste: function(event) {\n        event.preventDefault();\n        exec('insertHTML', event.clipboardData.getData('text/html') ? cleanHtml(event.clipboardData.getData('text/html')) : event.clipboardData.getData('text'));\n      },\n      _onChange: function(html) {\n        this.fire('change', html);\n      },\n      _documentClick: function(event) {\n        if (!isEditorClick(event.target, this.refs.editorWrapper) && this.helper.blurActive) {\n          this.fire('blur', event);\n        }\n        this.helper.blurActive = true;\n      },\n      exec: (cmd, value) => {\n        exec(cmd, value);\n      },\n      getHtml: function(sanitize) {\n        return sanitize ? removeBadTags(this.refs.editor.innerHTML) : this.refs.editor.innerHTML;\n      },\n      getText: function() {\n        return this.refs.editor.innerText;\n      },\n      setHtml: function(html, sanitize) {\n        this.refs.editor.innerHTML = sanitize ? removeBadTags(html) : (html || '');\n      },\n      saveRange: function() {\n        saveRange(this.refs.editor);\n      },\n      restoreRange: function() {\n        restoreRange(this.refs.editor);\n      }\n    }\n  }\n</script>\n\n<style type=\"text/css\">\n  .cl * {\n    box-sizing: border-box;\n  }\n\n  .cl {\n    box-shadow: 0 2px 3px rgba(10, 10, 10, 0.1), 0 0 0 1px rgba(10, 10, 10, 0.1);\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n\n  .cl-content {\n    height: 300px;\n    outline: 0;\n    overflow-y: auto;\n    padding: 10px;\n    width: 100%;\n    background-color: white;\n  }\n\n  .cl-actionbar {\n    background-color: #ecf0f1;\n    border-bottom: 1px solid rgba(10, 10, 10, 0.1);\n    width: 100%;\n  }\n\n  .cl-button {\n    background-color: transparent;\n    border: none;\n    cursor: pointer;\n    height: 35px;\n    outline: 0;\n    width: 35px;\n    vertical-align: top;\n    position: relative;\n  }\n\n  .cl-button:hover, .cl-button.active {\n    background-color: #fff;\n  }\n\n  .cl-button:disabled {\n    opacity: .5;\n    pointer-events: none;\n  }\n\n  .cl-textarea {\n    display: none;\n    max-width: 100%;\n    min-width: 100%;\n    border: none;\n    padding: 10px;\n  }\n\n  .cl-textarea:focus {\n    outline: none;\n  }\n\n</style>\n"],"names":["t","exec","command","value","execCommand","getTagsRecursive","element","tags","tagName","parentNode","tag","style","getAttribute","textAlign","color","backgroundColor","filter","item","forEach","push","_tag","saveRange","editor","documentSelection","document","getSelection","range","rangeCount","savedRange","getRangeAt","createRange","rangeStart","selectNodeContents","setEnd","startContainer","startOffset","length","metaRange","restoreRange","start","end","charIndex","nodeStack","node","foundStart","stop","pop","nodeType","nextCharIndex","setStart","cn","childNodes","i","removeAllRanges","addRange","cleanHtml","input","html","match","output","replace","RegExp","split","trim","removeBadTags","unwrap","wrapper","docFrag","createDocumentFragment","firstChild","child","removeChild","appendChild","replaceChild","removeBlockTagsRecursive","elements","tagsToRemove","from","some","toLowerCase","children","getActionBtns","actions","Object","keys","map","action","getNewActionObj","userActions","newActions","assign","name","badTag","isEditorClick","target","editorWrapper","parentElement","linkSvg","unlinkSvg","_this","actionObj","get","helper","showEditor","refs","display","raw","innerHTML","disabled","viewHtml","active","set","actionBtns","a","selection","window","focusNode","title","icon","modal","show","event","label","link","on","url","image","call","toString","showColorPicker","cmd","colorPicker","preventDefault","text","fire","cancel","error","focus","observe","init","confirm","hideError","colors","getBtns","btns","btn","close","selectColor","result","_handleButtonStatus","clearBtns","clipboardData","getData","blurActive","sanitize","innerText","data","options","setHtml","EditorModal","EditorColorPicker","_documentClick","_onChange","_onPaste","height","_btnClicked"],"mappings":"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"}